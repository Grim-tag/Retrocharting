(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[95],{20349:(e,t,a)=>{Promise.resolve().then(a.bind(a,14846))},14846:(e,t,a)=>{"use strict";a.d(t,{default:()=>x});var s=a(95155),r=a(12115),n=a(76046),o=a(68435);function l(){let{token:e}=(0,o.A)(),[t,a]=(0,r.useState)(null),[n,l]=(0,r.useState)(!0);(0,r.useEffect)(()=>{e&&c()},[e]);let c=async()=>{try{let t=await fetch("".concat("http://127.0.0.1:8000","/api/v1/admin/amazon-stats"),{headers:{Authorization:"Bearer ".concat(e)}});t.ok&&a(await t.json())}catch(e){console.error(e)}finally{l(!1)}};return n?(0,s.jsx)("div",{className:"text-gray-400 p-8 text-center",children:"Loading Amazon Data..."}):t?(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-[#ff6600]",children:"Amazon Regional Coverage"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsx)(i,{label:"Total Listings",value:t.total_products_with_amazon,highlight:!0}),(0,s.jsx)(i,{label:"NTSC (US/CA)",value:t.region_counts.NTSC}),(0,s.jsx)(i,{label:"PAL (Europe)",value:t.region_counts.PAL}),(0,s.jsx)(i,{label:"JP (Japan)",value:t.region_counts.JP})]}),(0,s.jsxs)("div",{className:"bg-[#1f2533] p-4 rounded border border-[#2a3142]",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:"Recent Listings"}),(0,s.jsxs)("div",{className:"text-sm text-gray-400",children:["Products with EAN: ",t.products_with_ean]})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,s.jsx)("thead",{className:"text-gray-400 border-b border-[#2a3142]",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"py-2 px-4",children:"Region"}),(0,s.jsx)("th",{className:"py-2 px-4",children:"Product"}),(0,s.jsx)("th",{className:"py-2 px-4",children:"Console"}),(0,s.jsx)("th",{className:"py-2 px-4",children:"Price"}),(0,s.jsx)("th",{className:"py-2 px-4",children:"Link"})]})}),(0,s.jsx)("tbody",{children:t.recent_listings.map((e,t)=>{var a;return(0,s.jsxs)("tr",{className:"border-b border-[#2a3142] hover:bg-[#2a3142]/50",children:[(0,s.jsx)("td",{className:"py-2 px-4",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded text-xs font-bold ".concat("NTSC"===e.region?"bg-blue-900 text-blue-200":"PAL"===e.region?"bg-green-900 text-green-200":"bg-red-900 text-red-200"),children:e.region})}),(0,s.jsx)("td",{className:"py-2 px-4 font-medium text-white",children:e.product_name||(null===(a=e.amazon_title)||void 0===a?void 0:a.substring(0,40))}),(0,s.jsx)("td",{className:"py-2 px-4 text-gray-400",children:e.console_name}),(0,s.jsxs)("td",{className:"py-2 px-4 text-[#ff6600] font-bold",children:[e.price," ",e.currency]}),(0,s.jsx)("td",{className:"py-2 px-4",children:(0,s.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",children:"View"})})]},t)})})]})})]})]}):(0,s.jsx)("div",{className:"text-red-400 p-8 text-center",children:"Failed to load Amazon stats."})}function i(e){let{label:t,value:a,highlight:r=!1}=e;return(0,s.jsxs)("div",{className:"bg-[#1f2533] p-6 rounded border border-[#2a3142]",children:[(0,s.jsx)("div",{className:"text-gray-400 text-sm mb-1",children:t}),(0,s.jsx)("div",{className:"text-2xl font-bold ".concat(r?"text-[#ff6600]":"text-white"),children:void 0!==a?a:"-"})]})}var c=a(57280);function d(){let{token:e}=(0,o.A)(),[t,a]=(0,r.useState)([]),[n,l]=(0,r.useState)(!0);(0,r.useEffect)(()=>{e&&i()},[e]);let i=async()=>{try{let t=await fetch("".concat("http://127.0.0.1:8000","/api/v1/admin/users"),{headers:{Authorization:"Bearer ".concat(e)}});t.ok&&a(await t.json())}catch(e){console.error(e)}finally{l(!1)}};return n?(0,s.jsx)("div",{className:"text-gray-400 p-8 text-center",children:"Loading Users..."}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-[#ff6600]",children:"User Management"}),(0,s.jsx)("div",{className:"bg-[#1f2533] rounded border border-[#2a3142] overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,s.jsx)("thead",{className:"text-gray-400 bg-[#161b26] border-b border-[#2a3142]",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"py-3 px-6",children:"ID"}),(0,s.jsx)("th",{className:"py-3 px-6",children:"User"}),(0,s.jsx)("th",{className:"py-3 px-6",children:"Rank"}),(0,s.jsx)("th",{className:"py-3 px-6",children:"Role"}),(0,s.jsx)("th",{className:"py-3 px-6",children:"Joined"}),(0,s.jsx)("th",{className:"py-3 px-6",children:"Last Active"})]})}),(0,s.jsx)("tbody",{children:t.map(e=>(0,s.jsxs)("tr",{className:"border-b border-[#2a3142] hover:bg-[#2a3142]/50",children:[(0,s.jsxs)("td",{className:"py-3 px-6 text-gray-500",children:["#",e.id]}),(0,s.jsxs)("td",{className:"py-3 px-6",children:[(0,s.jsx)("div",{className:"font-bold text-white",children:e.email}),(0,s.jsx)("div",{className:"text-xs text-gray-400",children:e.username||"No username"})]}),(0,s.jsxs)("td",{className:"py-3 px-6",children:[(0,s.jsx)("span",{className:"bg-gray-700 px-2 py-1 rounded text-xs",children:e.rank||"Novice"}),(0,s.jsxs)("span",{className:"ml-2 text-xs text-gray-500",children:[e.xp," XP"]})]}),(0,s.jsx)("td",{className:"py-3 px-6",children:e.is_admin?(0,s.jsx)("span",{className:"text-red-400 font-bold border border-red-900 bg-red-900/20 px-2 py-1 rounded text-xs",children:"ADMIN"}):(0,s.jsx)("span",{className:"text-gray-400",children:"User"})}),(0,s.jsx)("td",{className:"py-3 px-6 text-gray-400",children:e.created_at?(0,c.GP)(new Date(e.created_at),"MMM d, yyyy"):"-"}),(0,s.jsx)("td",{className:"py-3 px-6 text-gray-400",children:e.last_active?(0,c.GP)(new Date(e.last_active),"MMM d, HH:mm"):"-"})]},e.id))})]})})]})}function u(){let{token:e}=(0,o.A)(),[t,a]=(0,r.useState)([]),[n,l]=(0,r.useState)(!0),[i,c]=(0,r.useState)("");(0,r.useEffect)(()=>{e&&d()},[e]);let d=async()=>{try{let t=await fetch("".concat("http://127.0.0.1:8000","/api/v1/admin/logs"),{headers:{Authorization:"Bearer ".concat(e)}});t.ok&&a(await t.json())}catch(e){console.error(e)}finally{l(!1)}},u=async function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(confirm("Are you sure you want to run this action?")){c("Running ".concat(t,"..."));try{let r={method:a,headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}};s&&(r.body=JSON.stringify(s));let n=await fetch("".concat("http://127.0.0.1:8000","/api/v1/admin/").concat(t),r),o=await n.json();c("Success: ".concat(JSON.stringify(o))),setTimeout(d,2e3)}catch(e){c("Error: ".concat(e.message))}}};return(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-[#ff6600]",children:"Maintenance Tools"}),(0,s.jsxs)("div",{className:"bg-[#1f2533] p-6 rounded border border-[#2a3142] space-y-4",children:[(0,s.jsx)(h,{label:"\uD83D\uDEE0️ Fix Genres (PC)",desc:"Standardize PC genres to match console list.",onClick:()=>u("maintenance/fix-genres")}),(0,s.jsx)(h,{label:"\uD83D\uDCE6 Enrich PC Games",desc:"Trigger IGDB enrichment for 500 PC games.",onClick:()=>u("enrich-pc-games")}),(0,s.jsx)(h,{label:"\uD83D\uDDBC️ Migrate Images",desc:"Move external images to local storage (50 items).",onClick:()=>u("images/migrate","POST")}),(0,s.jsx)(h,{label:"\uD83C\uDFF7️ Fix Listings Class",desc:"Re-run classifier on Amazon/eBay listings.",onClick:()=>u("fix-listings","POST")}),(0,s.jsx)(h,{label:"\uD83D\uDCBE DB Schema Migration",desc:"Add missing columns (EAN, Publisher...).",onClick:()=>u("db/migrate","POST")}),(0,s.jsx)("div",{className:"h-px bg-[#2a3142] my-2"}),(0,s.jsx)(h,{label:"\uD83D\uDC7B Cleanup Ghost Games",desc:"Delete 30k+ empty games lingering after fusion.",onClick:()=>u("consolidation/cleanup-ghosts","DELETE")}),(0,s.jsx)(h,{label:"\uD83D\uDE80 Auto-Recover Prices",desc:"Run in background with safety pauses until done.",onClick:()=>u("enrich/price-recovery?limit=500&continuous=true","POST")})]}),i&&(0,s.jsx)("div",{className:"p-4 bg-black/50 text-green-400 font-mono text-xs rounded border border-green-900 break-words",children:i})]}),(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:"System Logs"}),(0,s.jsx)("button",{onClick:()=>d(),className:"text-sm text-[#ff6600] hover:underline",children:"Refresh"})]}),(0,s.jsx)("div",{className:"bg-[#1f2533] rounded border border-[#2a3142] overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full text-xs font-mono",children:[(0,s.jsx)("thead",{className:"bg-[#161b26] text-gray-400 text-left",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"p-3",children:"Time"}),(0,s.jsx)("th",{className:"p-3",children:"Source"}),(0,s.jsx)("th",{className:"p-3",children:"Status"}),(0,s.jsx)("th",{className:"p-3",children:"Items"}),(0,s.jsx)("th",{className:"p-3",children:"Details"}),(0,s.jsx)("th",{className:"p-3",children:"Duration"})]})}),(0,s.jsxs)("tbody",{children:[t.map(e=>(0,s.jsxs)("tr",{className:"border-b border-[#2a3142] hover:bg-[#2a3142]/50",children:[(0,s.jsx)("td",{className:"p-3 text-gray-500",children:new Date(e.start_time).toLocaleString()}),(0,s.jsx)("td",{className:"p-3 text-white font-bold",children:e.source}),(0,s.jsx)("td",{className:"p-3",children:(0,s.jsx)("span",{className:"px-1 rounded ".concat("success"===e.status?"bg-green-900 text-green-200":"error"===e.status?"bg-red-900 text-red-200":"bg-yellow-900 text-yellow-200"),children:e.status})}),(0,s.jsxs)("td",{className:"p-3 text-gray-300",children:[e.items_processed," items"]}),(0,s.jsx)("td",{className:"p-3 text-gray-400 max-w-xs truncate",title:e.error_message,children:e.error_message||"-"}),(0,s.jsx)("td",{className:"p-3 text-gray-500",children:e.duration_seconds?"".concat(e.duration_seconds.toFixed(1),"s"):"-"})]},e.id)),0===t.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:5,className:"p-8 text-center text-gray-500",children:"No logs found."})})]})]})})]})]})}function h(e){let{label:t,desc:a,onClick:r}=e;return(0,s.jsxs)("button",{onClick:r,className:"w-full text-left p-3 rounded bg-[#0f121e] hover:bg-[#161b26] border border-[#2a3142] transition-colors group",children:[(0,s.jsx)("div",{className:"font-bold text-white group-hover:text-[#ff6600] transition-colors",children:t}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:a})]})}function x(){let{user:e,token:t,loading:a,isAuthenticated:i}=(0,o.A)(),c=(0,n.useRouter)(),[h,x]=(0,r.useState)("dashboard"),[g,f]=(0,r.useState)(null),[b,y]=(0,r.useState)(null),[v,j]=(0,r.useState)(!0),[N,w]=(0,r.useState)(!1),[_,C]=(0,r.useState)(null);(0,r.useEffect)(()=>{a||i&&(null==e?void 0:e.is_admin)||c.replace("/")},[e,a,i,c]),(0,r.useEffect)(()=>{i&&(null==e?void 0:e.is_admin)&&t&&S()},[i,e,t]);let S=async()=>{if(t)try{let[e,a]=await Promise.all([fetch("".concat("http://127.0.0.1:8000","/api/v1/admin/stats"),{headers:{Authorization:"Bearer ".concat(t)}}),fetch("".concat("http://127.0.0.1:8000","/api/v1/admin/consolidation/stats"),{headers:{Authorization:"Bearer ".concat(t)}})]);e.ok&&f(await e.json()),a.ok&&y(await a.json())}catch(e){console.error(e)}finally{j(!1)}},D=async e=>{if(t){w(!0),C(null);try{let a=await fetch("".concat("http://127.0.0.1:8000","/api/v1/admin/consolidation/run?dry_run=").concat(e),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}}),s=await a.json();C(s),S()}catch(e){alert("Error running fusion: "+e.message)}finally{w(!1)}}};return a||v&&i?(0,s.jsx)("div",{className:"p-8 text-white",children:"Loading Admin Securely..."}):i&&(null==e?void 0:e.is_admin)?(0,s.jsxs)("div",{className:"min-h-screen bg-[#0f121e] text-white p-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold",children:"Admin Dashboard"}),(0,s.jsxs)("div",{className:"text-sm text-gray-400",children:["Logged as ",(0,s.jsx)("span",{className:"text-[#ff6600]",children:e.email})]})]}),(0,s.jsxs)("div",{className:"flex space-x-4 border-b border-[#2a3142] mb-8 overflow-x-auto",children:[(0,s.jsx)(m,{label:"Dashboard & Fusion",id:"dashboard",active:h,onClick:x}),(0,s.jsx)(m,{label:"Amazon Market",id:"amazon",active:h,onClick:x}),(0,s.jsx)(m,{label:"User Management",id:"users",active:h,onClick:x}),(0,s.jsx)(m,{label:"System & Logs",id:"system",active:h,onClick:x})]}),(0,s.jsxs)("div",{className:"animate-fade-in",children:["dashboard"===h&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("section",{className:"mb-12",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4 text-[#ff6600]",children:"Platform Health"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsx)(p,{label:"Total Products",value:null==g?void 0:g.total_products}),(0,s.jsx)(p,{label:"Scraped %",value:"".concat(null==g?void 0:g.scraped_percentage,"%")}),(0,s.jsx)(p,{label:"Pending Images",value:null==g?void 0:g.pending_image_migration}),(0,s.jsx)(p,{label:"Missing Descriptions",value:null==g?void 0:g.missing_description_count})]})]}),(0,s.jsxs)("section",{className:"bg-[#1f2533] p-6 rounded-lg border border-[#2a3142]",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-[#ff6600]",children:"Fusion Center \uD83E\uDDEC"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Manage Game/Product consolidation."})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"text-3xl font-bold",children:[null==b?void 0:b.fusion_rate,"%"]}),(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Consolidated"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,s.jsx)(p,{label:"Total Products",value:null==b?void 0:b.total_products,bg:"bg-[#0f121e]"}),(0,s.jsx)(p,{label:"Orphans (No Parent)",value:null==b?void 0:b.orphans,bg:"bg-[#0f121e]",highlight:!0}),(0,s.jsx)(p,{label:"Games Created",value:null==b?void 0:b.games_created,bg:"bg-[#0f121e]"})]}),(0,s.jsxs)("div",{className:"border-t border-[#2a3142] pt-6 flex gap-4",children:[(0,s.jsx)("button",{onClick:()=>D(!0),disabled:N,className:"px-6 py-2 bg-gray-600 hover:bg-gray-500 rounded font-bold transition-colors disabled:opacity-50",children:N?"Running...":"Run Dry Test (Safe)"}),(0,s.jsx)("button",{onClick:()=>D(!1),disabled:N,className:"px-6 py-2 bg-[#ff6600] hover:bg-[#e65c00] rounded font-bold transition-colors disabled:opacity-50",children:N?"Processing...":"⚡ RUN LIVE FUSION"}),(0,s.jsx)("button",{onClick:async()=>{if(confirm("Create Unified Pages for Accessories & Controllers?")){w(!0);try{let e=await fetch("".concat("http://127.0.0.1:8000","/api/v1/admin/consolidation/unify-accessories"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}}),a=await e.json();alert(a.message),S()}catch(e){alert(e.message)}finally{w(!1)}}},disabled:N,className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 rounded font-bold transition-colors disabled:opacity-50",children:"\uD83D\uDD17 UNIFY ACCESSORIES"}),(0,s.jsx)("button",{onClick:async()=>{if(confirm("Start Unification for Consoles/Hardware?")){w(!0);try{let e=await fetch("".concat("http://127.0.0.1:8000","/api/v1/admin/unify-consoles"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}}),a=await e.json();alert(a.message||"Unification Started!"),S()}catch(e){alert(e.message)}finally{w(!1)}}},disabled:N,className:"px-6 py-2 bg-purple-600 hover:bg-purple-500 rounded font-bold transition-colors disabled:opacity-50",children:"\uD83C\uDFAE UNIFY CONSOLES"})]}),_&&(0,s.jsxs)("div",{className:"mt-6 p-4 bg-[#0f121e] rounded font-mono text-sm overflow-auto max-h-96",children:[(0,s.jsxs)("h3",{className:"font-bold text-green-400 mb-2",children:["Result (",_.mode,"):"]}),(0,s.jsx)("pre",{className:"whitespace-pre-wrap",children:JSON.stringify(_.stats,null,2)})]})]})]}),"amazon"===h&&(0,s.jsx)(l,{}),"users"===h&&(0,s.jsx)(d,{}),"system"===h&&(0,s.jsx)(u,{})]})]}):null}function m(e){let{label:t,id:a,active:r,onClick:n}=e;return(0,s.jsx)("button",{onClick:()=>n(a),className:"px-4 py-2 font-medium border-b-2 transition-colors whitespace-nowrap ".concat(r===a?"border-[#ff6600] text-white":"border-transparent text-gray-400 hover:text-white"),children:t})}function p(e){let{label:t,value:a,bg:r="bg-[#1f2533]",highlight:n=!1}=e;return(0,s.jsxs)("div",{className:"".concat(r," p-6 rounded border border-[#2a3142]"),children:[(0,s.jsx)("div",{className:"text-gray-400 text-sm mb-1",children:t}),(0,s.jsx)("div",{className:"text-2xl font-bold ".concat(n?"text-red-400":"text-white"),children:void 0!==a?a:"-"})]})}},68435:(e,t,a)=>{"use strict";a.d(t,{A:()=>c,AuthProvider:()=>i});var s=a(95155),r=a(12115),n=a(80022),o=a(85534);let l=(0,r.createContext)(void 0);function i(e){let{children:t}=e,[a,i]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=localStorage.getItem("rc_token");e?(d(e),(0,o.Ni)(e).then(e=>{e?i(e):m()}).finally(()=>h(!1))):h(!1)},[]);let x=async e=>{let t=await (0,o.XL)(e);t&&t.access_token&&(localStorage.setItem("rc_token",t.access_token),d(t.access_token),i(await (0,o.Ni)(t.access_token)))},m=()=>{localStorage.removeItem("rc_token"),d(null),i(null)},p="dummy-client-id-for-static-build";p||console.error("CRITICAL: NEXT_PUBLIC_GOOGLE_CLIENT_ID is missing. Google Login will fail.");let g=async()=>{c&&i(await (0,o.Ni)(c))};return(0,s.jsx)(n.G_,{clientId:p,children:(0,s.jsx)(l.Provider,{value:{user:a,token:c,login:x,logout:m,refreshUser:g,isAuthenticated:!!a,loading:u},children:t})})}function c(){let e=(0,r.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},85534:(e,t,a)=>{"use strict";a.d(t,{$_:()=>y,CG:()=>N,Go:()=>w,Li:()=>m,Ni:()=>u,R1:()=>n,Ri:()=>o,Sb:()=>p,Sk:()=>c,Sz:()=>i,TK:()=>g,UQ:()=>l,XL:()=>d,X_:()=>h,bC:()=>f,e9:()=>r,fA:()=>j,jg:()=>b,mQ:()=>v,nL:()=>x});var s=a(93681);function r(){return s.H}async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6?arguments[6]:void 0;try{return(await s.u.get("/products",{params:{console:e,limit:t,genre:a,type:r,sort:n,skip:o,search:l}})).data}catch(e){return console.error("Error fetching products:",e),[]}}async function o(e){try{return(await s.u.get("/products/search/grouped",{params:{query:e}})).data}catch(e){return console.error("Error searching products grouped:",e),{}}}async function l(e){try{let t=await s.u.get("/products/".concat(e,"/listings"),{params:{_t:new Date().getTime()}}),a="true"===t.headers["x-is-stale"];return{data:t.data,isStale:a,status:t.status}}catch(e){var t;return{data:[],isStale:!1,status:(null===(t=e.response)||void 0===t?void 0:t.status)||500}}}async function i(e){try{return(await s.u.get("/products/".concat(e,"/related"))).data}catch(e){return console.error("Error fetching related products:",e),[]}}async function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0;try{return(await s.u.get("/games/",{params:{console:e,limit:t,genre:a,type:l,sort:r,skip:n,search:o}})).data}catch(e){return console.error("Error fetching games:",e),[]}}async function d(e){try{return(await s.u.post("/auth/google",{credential:e})).data}catch(e){var t,a;throw console.error("Google Login failed",e),Error((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.detail)||e.message||"Login failed")}}async function u(e){try{return(await s.u.get("/auth/me")).data}catch(e){return null}}async function h(e){try{return(await s.u.get("/collection/")).data}catch(e){return console.error("Failed to fetch collection",e),[]}}async function x(e,t,a,r,n){try{return(await s.u.post("/collection/",{product_id:t,condition:a,paid_price:n,notes:r})).data}catch(e){var o,l;throw console.error("Failed to add to collection",e),Error((null===(l=e.response)||void 0===l?void 0:null===(o=l.data)||void 0===o?void 0:o.detail)||"Failed to add to collection")}}async function m(e,t,a){try{return(await s.u.put("/collection/".concat(t),a)).data}catch(e){var r,n;throw console.error("Failed to update collection item",e),Error((null===(n=e.response)||void 0===n?void 0:null===(r=n.data)||void 0===r?void 0:r.detail)||"Failed to update item")}}async function p(e,t){try{return await s.u.delete("/collection/".concat(t)),!0}catch(e){return console.error("Failed to delete item",e),!1}}async function g(e,t){try{return(await s.u.put("/auth/me",t)).data}catch(e){throw e}}async function f(e){try{return(await s.u.get("/portfolio/summary")).data}catch(e){return console.error("Failed to fetch portfolio summary",e),{total_value:0,item_count:0,console_count:0,top_items:[]}}}async function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;try{return(await s.u.get("/portfolio/history",{params:{range_days:t}})).data}catch(e){return console.error("Failed to fetch portfolio history",e),[]}}async function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;try{return(await s.u.get("/portfolio/movers",{params:{days:t}})).data}catch(e){return console.error("Failed to fetch portfolio movers",e),{gainers:[],losers:[]}}}async function v(e){try{return(await s.u.get("/portfolio/debug")).data}catch(e){return console.error("Failed to fetch portfolio debug",e),{error:"Failed to fetch debug info"}}}async function j(e){try{return(await s.u.get("/portfolio/dashboard")).data}catch(e){return console.error("Failed to fetch portfolio dashboard",e),null}}async function N(e,t){let a=new FormData;a.append("file",e);try{return(await s.u.post("/import/upload",a,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){var r,n;throw console.error("CSV upload failed",e),Error((null===(n=e.response)||void 0===n?void 0:null===(r=n.data)||void 0===r?void 0:r.detail)||"Upload failed")}}async function w(e,t){try{return(await s.u.post("/import/confirm",{items:e})).data}catch(e){var a,r;throw console.error("Bulk import failed",e),Error((null===(r=e.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.detail)||"Import failed")}}},93681:(e,t,a)=>{"use strict";a.d(t,{H:()=>r,u:()=>n});var s=a(82651);let r="".concat("http://127.0.0.1:8000","/api/v1"),n=s.A.create({baseURL:r,timeout:12e4,headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{{let t=localStorage.getItem("rc_token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>Promise.reject(e))}},e=>{var t=t=>e(e.s=t);e.O(0,[651,788,424,441,517,358],()=>t(20349)),_N_E=e.O()}]);