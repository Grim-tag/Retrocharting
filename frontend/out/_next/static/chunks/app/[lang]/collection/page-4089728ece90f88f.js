(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[579],{46136:(e,t,s)=>{Promise.resolve().then(s.bind(s,52788))},80022:(e,t,s)=>{"use strict";s.d(t,{G_:()=>a,j:()=>i});var r=s(12115);let l=(0,r.createContext)(null);function a(e){let{clientId:t,nonce:s,onScriptLoadSuccess:a,onScriptLoadError:n,children:i}=e,o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{nonce:t,onScriptLoadSuccess:s,onScriptLoadError:l}=e,[a,n]=(0,r.useState)(!1),i=(0,r.useRef)(s);i.current=s;let o=(0,r.useRef)(l);return o.current=l,(0,r.useEffect)(()=>{let e=document.createElement("script");return e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.nonce=t,e.onload=()=>{var e;n(!0),null===(e=i.current)||void 0===e||e.call(i)},e.onerror=()=>{var e;n(!1),null===(e=o.current)||void 0===e||e.call(o)},document.body.appendChild(e),()=>{document.body.removeChild(e)}},[t]),a}({nonce:s,onScriptLoadSuccess:a,onScriptLoadError:n}),c=(0,r.useMemo)(()=>({clientId:t,scriptLoadedSuccessfully:o}),[t,o]);return r.createElement(l.Provider,{value:c},i)}let n={large:40,medium:32,small:20};function i(e){let{onSuccess:t,onError:s,useOneTap:a,promptMomentNotification:i,type:o="standard",theme:c="outline",size:d="large",text:u,shape:x,logo_alignment:m,width:h,locale:g,click_listener:p,containerProps:f,...b}=e,v=(0,r.useRef)(null),{clientId:j,scriptLoadedSuccessfully:N}=function(){let e=(0,r.useContext)(l);if(!e)throw Error("Google OAuth components must be used within GoogleOAuthProvider");return e}(),w=(0,r.useRef)(t);w.current=t;let y=(0,r.useRef)(s);y.current=s;let k=(0,r.useRef)(i);return k.current=i,(0,r.useEffect)(()=>{var e,t,s,r,l,n,i,f,_;if(N)return null===(s=null===(t=null===(e=null==window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===t?void 0:t.id)||void 0===s||s.initialize({client_id:j,callback:e=>{var t,s;if(!(null==e?void 0:e.credential))return null===(t=y.current)||void 0===t?void 0:t.call(y);let{credential:r,select_by:l}=e;w.current({credential:r,clientId:null!==(s=null==e?void 0:e.clientId)&&void 0!==s?s:null==e?void 0:e.client_id,select_by:l})},...b}),null===(n=null===(l=null===(r=null==window?void 0:window.google)||void 0===r?void 0:r.accounts)||void 0===l?void 0:l.id)||void 0===n||n.renderButton(v.current,{type:o,theme:c,size:d,text:u,shape:x,logo_alignment:m,width:h,locale:g,click_listener:p}),a&&(null===(_=null===(f=null===(i=null==window?void 0:window.google)||void 0===i?void 0:i.accounts)||void 0===f?void 0:f.id)||void 0===_||_.prompt(k.current)),()=>{var e,t,s;a&&(null===(s=null===(t=null===(e=null==window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===t?void 0:t.id)||void 0===s||s.cancel())}},[j,N,a,o,c,d,u,x,m,h,g]),r.createElement("div",{...f,ref:v,style:{height:n[d],...null==f?void 0:f.style}})}},76046:(e,t,s)=>{"use strict";var r=s(66658);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},52788:(e,t,s)=>{"use strict";s.d(t,{default:()=>g});var r=s(95155),l=s(68435),a=s(85534),n=s(76046),i=s(12115),o=s(11977),c=s(31558);function d(e){let{item:t,isOpen:s,onClose:n,onSave:d,lang:u}=e,{token:x}=(0,l.A)(),[m,h]=(0,i.useState)("LOOSE"),[g,p]=(0,i.useState)(""),[f,b]=(0,i.useState)(""),[v,j]=(0,i.useState)(""),[N,w]=(0,i.useState)([]),[y,k]=(0,i.useState)(!1),{currency:_}=(0,c.H)(),C=(0,o.Qn)(_);if((0,i.useEffect)(()=>{if(t){if(h(t.condition),p(t.notes||""),null!==t.paid_price&&void 0!==t.paid_price){let e=(0,o.Tt)(t.paid_price,_);null!==e?b(e.toFixed(2)):b("")}else b("");t.purchase_date?j(new Date(t.purchase_date).toISOString().split("T")[0]):j("");try{t.user_images?w(JSON.parse(t.user_images)):w([])}catch(e){w([])}}},[t,_]),!s||!t)return null;let S=async()=>{if(x){k(!0);try{let e;if(f){let t=parseFloat(f.replace(",","."));isNaN(t)||(e=(0,o.Q3)(t,_))}let s=await (0,a.Li)(x,t.id,{condition:m,notes:g,paid_price:e,purchase_date:v?new Date(v).toISOString():void 0,user_images:JSON.stringify(N)});d(s),n()}catch(e){console.error(e),alert("Failed to save changes")}finally{k(!1)}}};return(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:(0,r.jsxs)("div",{className:"bg-[#1f2533] border border-[#3a4152] rounded-xl shadow-2xl max-w-md w-full p-6 text-white relative animate-fade-in-up",children:[(0,r.jsx)("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:"✕"}),(0,r.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Edit Item"}),(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-6 bg-[#2a3142] p-3 rounded",children:[t.image_url&&(0,r.jsx)("img",{src:t.image_url,className:"w-12 h-12 rounded object-cover"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-bold text-sm",children:t.product_name}),(0,r.jsx)("div",{className:"text-xs text-gray-400",children:t.console_name})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-xs uppercase text-gray-400 mb-2",children:"Condition"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["LOOSE","CIB","NEW","GRADED"].map(e=>(0,r.jsx)("button",{onClick:()=>h(e),className:"py-2 text-sm rounded border ".concat(m===e?"bg-[#ff6600] border-[#ff6600] text-white":"bg-[#2a3142] border-[#3a4152] text-gray-300 hover:border-gray-500"),children:e},e))})]}),(0,r.jsxs)("div",{className:"mb-4 grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-xs uppercase text-gray-400 mb-2",children:["Price Paid (",C,")"]}),(0,r.jsx)("input",{type:"number",step:"0.01",value:f,onChange:e=>b(e.target.value),className:"w-full bg-[#0f121e] border border-[#3a4152] rounded p-2 text-sm text-white focus:border-[#ff6600] outline-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs uppercase text-gray-400 mb-2",children:"Purchase Date"}),(0,r.jsx)("input",{type:"date",value:v,onChange:e=>j(e.target.value),className:"w-full bg-[#0f121e] border border-[#3a4152] rounded p-2 text-sm text-white focus:border-[#ff6600] outline-none"})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-xs uppercase text-gray-400 mb-2",children:"My Photos (Max 3)"}),(0,r.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[0,1,2].map(e=>(0,r.jsx)("div",{className:"aspect-square bg-[#0f121e] border border-[#3a4152] rounded flex items-center justify-center text-gray-500 text-xs relative overflow-hidden group",children:N[e]?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("img",{src:N[e],className:"w-full h-full object-cover"}),(0,r.jsx)("button",{onClick:()=>{let t=[...N];t.splice(e,1),w(t)},className:"absolute inset-0 bg-black/50 hidden group-hover:flex items-center justify-center text-red-400 font-bold",children:"X"})]}):(0,r.jsx)("span",{children:"Empty"})},e))}),(0,r.jsx)("div",{className:"text-[10px] text-gray-500 mt-1",children:"* Upload feature coming soon"})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-xs uppercase text-gray-400 mb-2",children:"Notes"}),(0,r.jsx)("textarea",{value:g,onChange:e=>p(e.target.value),className:"w-full bg-[#0f121e] border border-[#3a4152] rounded p-2 text-sm text-white focus:border-[#ff6600] outline-none",rows:2})]}),(0,r.jsx)("button",{onClick:S,disabled:y,className:"w-full bg-[#ff6600] hover:bg-[#e65c00] text-white font-bold py-3 rounded transition-colors",children:y?"Saving...":"Save Changes"})]})})}let u=i.forwardRef(function(e,t){let{title:s,titleId:r,...l}=e;return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),s?i.createElement("title",{id:r},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}),x=i.forwardRef(function(e,t){let{title:s,titleId:r,...l}=e;return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),s?i.createElement("title",{id:r},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});var m=s(48173),h=s.n(m);function g(e){let{dict:t,lang:s}=e,{user:m,token:g,isAuthenticated:p}=(0,l.A)(),f=(0,n.useRouter)(),[b,v]=(0,i.useState)([]),[j,N]=(0,i.useState)(!0),[w,y]=(0,i.useState)(null),{currency:k}=(0,c.H)();(0,i.useEffect)(()=>{j||p||f.push("en"===s?"/":"/".concat(s))},[p,j,s,f]),(0,i.useEffect)(()=>{g?(0,a.X_)(g).then(e=>{v(e),N(!1)}):setTimeout(()=>N(!1),1e3)},[g]);let _=async e=>{confirm("Remove this item?")&&await (0,a.Sb)(g,e)&&v(b.filter(t=>t.id!==e))},[C,S]=(0,i.useState)("collection"),E=b.filter(e=>"WISHLIST"!==e.condition),L=b.filter(e=>"WISHLIST"===e.condition),P="collection"===C?E:L,I=P.reduce((e,t)=>e+(t.estimated_value||0),0);(0,o.Tt)(I,k);let O=P.length;return j?(0,r.jsx)("div",{className:"min-h-screen bg-[#1f2533] flex items-center justify-center text-white",children:"Loading..."}):p?(0,r.jsxs)("div",{className:"min-h-screen bg-[#1f2533] text-white",children:[(0,r.jsx)(d,{isOpen:!!w,item:w,onClose:()=>y(null),onSave:e=>{v(b.map(t=>t.id===e.id?e:t))},lang:s}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8 gap-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("img",{src:null==m?void 0:m.avatar_url,alt:"Avatar",className:"w-16 h-16 rounded-full border-2 border-[#ff6600]"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:(null==m?void 0:m.full_name)||"My Profile"}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:null==m?void 0:m.email}),(null==m?void 0:m.username)&&(0,r.jsxs)(h(),{href:"/".concat(s,"/user/").concat(m.username.toLowerCase()),className:"text-xs bg-[#2a3142] hover:bg-[#ff6600] text-gray-300 hover:text-white px-2 py-0.5 rounded transition-colors flex items-center gap-1",target:"_blank",children:[(0,r.jsx)("span",{children:"View Public Profile"}),(0,r.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-[#2a3142] rounded-lg p-4 flex gap-8 items-center border border-[#3a4152] shadow-lg",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-[#ff6600]",children:O}),(0,r.jsx)("div",{className:"text-xs uppercase tracking-wide text-gray-400",children:"collection"===C?"Games Owned":"Wished"})]}),(0,r.jsx)("div",{className:"w-px h-10 bg-[#3a4152]"}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-green-400",children:(0,o.$g)(I,k)}),(0,r.jsx)("div",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Est. Value"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between border-b border-[#3a4152] mb-6",children:[(0,r.jsxs)("div",{className:"flex gap-6",children:[(0,r.jsxs)("button",{onClick:()=>S("collection"),className:"pb-4 text-sm font-bold uppercase tracking-wider transition-colors border-b-2 ".concat("collection"===C?"border-[#ff6600] text-white":"border-transparent text-gray-500 hover:text-gray-300"),children:["Collection (",E.length,")"]}),(0,r.jsxs)("button",{onClick:()=>S("wishlist"),className:"pb-4 text-sm font-bold uppercase tracking-wider transition-colors border-b-2 ".concat("wishlist"===C?"border-[#ff6600] text-white":"border-transparent text-gray-500 hover:text-gray-300"),children:["Wishlist (",L.length,")"]})]}),"collection"===C&&(0,r.jsxs)("button",{onClick:()=>f.push("/".concat(s,"/import")),className:"text-gray-400 hover:text-white flex items-center gap-2 text-sm pb-4",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Import CSV"]})]}),0===P.length?(0,r.jsxs)("div",{className:"text-center py-20 text-gray-500 bg-[#2a3142]/20 rounded-lg border border-dashed border-[#3a4152]",children:[(0,r.jsx)("p",{className:"text-xl font-medium mb-2",children:"collection"===C?"Your collection is empty.":"Your wishlist is empty."}),(0,r.jsx)("p",{className:"text-sm",children:"collection"===C?"Start adding games you own to track your portfolio!":"Browse the catalog and add games you want to buy!"}),(0,r.jsx)("button",{onClick:()=>f.push("/".concat(s,"/games")),className:"mt-6 bg-[#ff6600] text-white px-6 py-2 rounded-full font-bold hover:bg-[#e65c00] transition-colors",children:"Browse Games"})]}):(0,r.jsx)("div",{className:"overflow-x-auto bg-[#2a3142] rounded-lg shadow border border-[#3a4152]",children:(0,r.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-[#1a202c] text-gray-400 text-xs uppercase tracking-wider",children:[(0,r.jsx)("th",{className:"p-4",children:"Game"}),(0,r.jsx)("th",{className:"p-4",children:"Console"}),(0,r.jsx)("th",{className:"p-4",children:"Condition"}),"collection"===C&&(0,r.jsx)("th",{className:"p-4 text-right",children:"Paid"}),(0,r.jsx)("th",{className:"p-4 text-right",children:"Value"}),"collection"===C&&(0,r.jsx)("th",{className:"p-4 text-right",children:"Profit"}),(0,r.jsx)("th",{className:"p-4 text-center",children:"Action"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-[#3a4152]",children:P.map(e=>{let t=e.estimated_value||0,l=e.paid_price,a=null!=l?t-l:null;return(0,r.jsxs)("tr",{className:"hover:bg-[#32394d] transition-colors",children:[(0,r.jsxs)("td",{className:"p-4 flex items-center gap-3",children:[(0,r.jsxs)("div",{onClick:()=>f.push("/".concat(s,"/games/").concat(e.console_name.toLowerCase().replace(/ /g,"-"),"/").concat(e.product_name.toLowerCase().replace(/ /g,"-").replace(/[^\w-]/g,""),"-").concat(e.product_id)),className:"flex items-center gap-3 cursor-pointer group",children:[e.image_url?(0,r.jsx)("img",{src:e.image_url,className:"w-10 h-10 object-cover rounded group-hover:opacity-80 transition-opacity"}):(0,r.jsx)("div",{className:"w-10 h-10 bg-gray-700 rounded flex items-center justify-center text-xs text-gray-500",children:"?"}),(0,r.jsx)("span",{className:"font-medium text-white group-hover:text-[#ff6600] transition-colors",children:e.product_name})]}),e.user_images&&(0,r.jsx)("span",{className:"text-[10px] bg-gray-700 px-1 rounded",title:"Initial Import",children:"☁️"})]}),(0,r.jsx)("td",{className:"p-4 text-gray-300",children:e.console_name}),(0,r.jsx)("td",{className:"p-4",children:(0,r.jsx)("span",{className:"px-2 py-1 rounded text-xs font-bold \n                                                    ".concat("NEW"===e.condition?"bg-green-900 text-green-300":"CIB"===e.condition?"bg-blue-900 text-blue-300":"WISHLIST"===e.condition?"bg-purple-900 text-purple-300":"bg-gray-700 text-gray-300"),children:e.condition})}),"collection"===C&&(0,r.jsx)("td",{className:"p-4 text-right font-mono text-gray-300",children:(0,o.$g)(l,k)}),(0,r.jsx)("td",{className:"p-4 text-right font-mono text-green-400",children:(0,o.$g)(t,k)}),"collection"===C&&(0,r.jsx)("td",{className:"p-4 text-right font-mono",children:null!==a?(0,r.jsxs)("span",{className:a>=0?"text-green-500":"text-red-500",children:[a>0?"+":"",(0,o.$g)(Math.abs(a),k)]}):(0,r.jsx)("span",{className:"text-gray-600",children:"-"})}),(0,r.jsx)("td",{className:"p-4 text-center",children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>y(e),className:"p-1.5 text-blue-400 hover:bg-blue-900/30 rounded transition-colors",title:"Edit Item",children:(0,r.jsx)(u,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:()=>_(e.id),className:"p-1.5 text-red-400 hover:bg-red-900/30 rounded transition-colors",title:"Delete Item",children:(0,r.jsx)(x,{className:"w-4 h-4"})})]})})]},e.id)})})]})})]})]}):null}}},e=>{var t=t=>e(e.s=t);e.O(0,[651,173,78,441,517,358],()=>t(46136)),_N_E=e.O()}]);