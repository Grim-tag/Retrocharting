(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[423],{86719:(e,t,r)=>{Promise.resolve().then(r.bind(r,86650))},80022:(e,t,r)=>{"use strict";r.d(t,{G_:()=>n,j:()=>i});var a=r(12115);let o=(0,a.createContext)(null);function n(e){let{clientId:t,nonce:r,onScriptLoadSuccess:n,onScriptLoadError:l,children:i}=e,s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{nonce:t,onScriptLoadSuccess:r,onScriptLoadError:o}=e,[n,l]=(0,a.useState)(!1),i=(0,a.useRef)(r);i.current=r;let s=(0,a.useRef)(o);return s.current=o,(0,a.useEffect)(()=>{let e=document.createElement("script");return e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.nonce=t,e.onload=()=>{var e;l(!0),null===(e=i.current)||void 0===e||e.call(i)},e.onerror=()=>{var e;l(!1),null===(e=s.current)||void 0===e||e.call(s)},document.body.appendChild(e),()=>{document.body.removeChild(e)}},[t]),n}({nonce:r,onScriptLoadSuccess:n,onScriptLoadError:l}),c=(0,a.useMemo)(()=>({clientId:t,scriptLoadedSuccessfully:s}),[t,s]);return a.createElement(o.Provider,{value:c},i)}let l={large:40,medium:32,small:20};function i(e){let{onSuccess:t,onError:r,useOneTap:n,promptMomentNotification:i,type:s="standard",theme:c="outline",size:d="large",text:u,shape:h,logo_alignment:m,width:p,locale:x,click_listener:v,containerProps:f,...g}=e,b=(0,a.useRef)(null),{clientId:w,scriptLoadedSuccessfully:y}=function(){let e=(0,a.useContext)(o);if(!e)throw Error("Google OAuth components must be used within GoogleOAuthProvider");return e}(),j=(0,a.useRef)(t);j.current=t;let N=(0,a.useRef)(r);N.current=r;let _=(0,a.useRef)(i);return _.current=i,(0,a.useEffect)(()=>{var e,t,r,a,o,l,i,f,E;if(y)return null===(r=null===(t=null===(e=null==window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===t?void 0:t.id)||void 0===r||r.initialize({client_id:w,callback:e=>{var t,r;if(!(null==e?void 0:e.credential))return null===(t=N.current)||void 0===t?void 0:t.call(N);let{credential:a,select_by:o}=e;j.current({credential:a,clientId:null!==(r=null==e?void 0:e.clientId)&&void 0!==r?r:null==e?void 0:e.client_id,select_by:o})},...g}),null===(l=null===(o=null===(a=null==window?void 0:window.google)||void 0===a?void 0:a.accounts)||void 0===o?void 0:o.id)||void 0===l||l.renderButton(b.current,{type:s,theme:c,size:d,text:u,shape:h,logo_alignment:m,width:p,locale:x,click_listener:v}),n&&(null===(E=null===(f=null===(i=null==window?void 0:window.google)||void 0===i?void 0:i.accounts)||void 0===f?void 0:f.id)||void 0===E||E.prompt(_.current)),()=>{var e,t,r;n&&(null===(r=null===(t=null===(e=null==window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===t?void 0:t.id)||void 0===r||r.cancel())}},[w,y,n,s,c,d,u,h,m,p,x]),a.createElement("div",{...f,ref:b,style:{height:l[d],...null==f?void 0:f.style}})}},86650:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var a=r(95155),o=r(12115),n=r(68435);let l=o.forwardRef(function(e,t){let{title:r,titleId:a,...n}=e;return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?o.createElement("title",{id:a},r):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}),i=o.forwardRef(function(e,t){let{title:r,titleId:a,...n}=e;return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?o.createElement("title",{id:a},r):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"}))}),s=o.forwardRef(function(e,t){let{title:r,titleId:a,...n}=e;return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?o.createElement("title",{id:a},r):null,o.createElement("path",{fillRule:"evenodd",d:"M12.963 2.286a.75.75 0 0 0-1.071-.136 9.742 9.742 0 0 0-3.539 6.176 7.547 7.547 0 0 1-1.705-1.715.75.75 0 0 0-1.152-.082A9 9 0 1 0 15.68 4.534a7.46 7.46 0 0 1-2.717-2.248ZM15.75 14.25a3.75 3.75 0 1 1-7.313-1.172c.628.465 1.35.81 2.133 1a5.99 5.99 0 0 1 1.925-3.546 3.75 3.75 0 0 1 3.255 3.718Z",clipRule:"evenodd"}))});var c=r(93681);function d(){let{user:e}=(0,n.A)(),[t,r]=(0,o.useState)(""),[d,u]=(0,o.useState)(!1),[h,m]=(0,o.useState)([]),[p,x]=(0,o.useState)(null),v=async()=>{if(t){u(!0);try{await f()}catch(e){console.error("Sniper error:",e)}finally{u(!1)}}},f=async()=>{try{let e=(await c.u.get("/sniper/search/vinted?query=".concat(encodeURIComponent(t)))).data;if(!e.success)throw Error(e.error||"Unknown Sniper Error");m(e.items),x(new Date().toLocaleTimeString())}catch(e){console.error(e),alert("P\xe9pin technique : ".concat(e.message)),m([])}};return(0,a.jsx)("div",{className:"min-h-screen bg-[#0f121e] pt-24 pb-12 px-4",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsx)("div",{className:"mb-8 flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-[#09b1ba]",children:"\uD83C\uDFAF"})," Sniper Mode"]}),(0,a.jsx)("p",{className:"text-gray-400",children:"Live Scanner • Vinted"})]})}),(0,a.jsx)("div",{className:"bg-[#1f2533] border border-[#2a3142] rounded-lg p-6 mb-8 shadow-lg",children:(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("input",{type:"text",value:t,onChange:e=>r(e.target.value),placeholder:"Ex: Nintendo 64 Console, Zelda Boxed...",className:"flex-1 bg-[#0f121e] text-white border border-[#2a3142] rounded px-4 py-3 focus:outline-none focus:border-[#09b1ba] transition-colors"}),(0,a.jsx)("button",{onClick:v,disabled:d||!t,className:"px-8 py-3 rounded font-bold transition-all flex items-center gap-2 ".concat(d?"bg-gray-600 cursor-not-allowed text-gray-400":"bg-[#09b1ba] hover:bg-[#0799a0] text-white shadow-[0_0_15px_rgba(9,177,186,0.3)]"),children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"animate-spin",children:"⟳"})," Scanning..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l,{className:"w-5 h-5"})," Sub-Zero Launch"]})})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[p&&(0,a.jsxs)("div",{className:"text-right text-xs text-gray-500 mb-2",children:["Last scan: ",p]}),h.map(e=>{var t,r,o,n,l,c,d;return(0,a.jsxs)("div",{className:"bg-[#1f2533]/50 border border-[#2a3142] p-4 rounded-lg flex items-center gap-4 hover:border-[#09b1ba]/50 transition-colors group animate-fade-in-up",children:[(0,a.jsxs)("div",{className:"w-24 h-24 bg-[#0f121e] rounded flex-shrink-0 overflow-hidden relative",children:[e.image_url?(0,a.jsx)("img",{src:e.image_url,alt:e.title,className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-600 text-xs",children:"No Img"}),(0,a.jsx)("span",{className:"absolute top-0 left-0 bg-[#09b1ba] text-white text-[10px] font-bold px-1.5 py-0.5 rounded-br",children:"Vinted"})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[e.platform&&"Vinted"!==e.platform&&(0,a.jsx)("span",{className:"text-[10px] bg-[#09b1ba]/10 text-[#09b1ba] px-2 py-0.5 rounded border border-[#09b1ba]/20 font-medium uppercase tracking-wider",children:e.platform}),e.is_potential_deal&&(0,a.jsxs)("div",{className:"flex items-center gap-1 bg-red-500/20 text-red-500 px-2 py-0.5 rounded border border-red-500/50 animate-pulse",children:[(0,a.jsx)(s,{className:"w-3 h-3"}),(0,a.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Deal"})]})]}),(0,a.jsx)("div",{className:"flex justify-between items-start mb-1",children:(0,a.jsx)("div",{className:"flex items-center gap-2 pr-4 min-w-0",children:(0,a.jsx)("h3",{className:"text-white font-bold text-lg leading-tight truncate group-hover:text-[#09b1ba] transition-colors",children:e.title})})}),(0,a.jsx)("div",{className:"text-gray-400 text-sm mb-2",children:e.created_at_ts||"Just now"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("span",{className:"text-2xl font-bold text-white leading-none",children:[(null===(t=e.price)||void 0===t?void 0:t.amount)||e.price," €"]}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Price"})]}),(0,a.jsx)("span",{className:"text-gray-600 text-xl font-light",children:"+"}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-sm text-gray-300 font-medium",children:(null===(r=e.shipping)||void 0===r?void 0:r.amount)?"".concat(e.shipping.amount," €"):"2.99 €"}),(0,a.jsx)("span",{className:"text-[10px] text-gray-500 uppercase",children:"Ship"})]}),(0,a.jsx)("span",{className:"text-gray-600 text-xl font-light",children:"+"}),(0,a.jsxs)("div",{className:"relative group/shield flex flex-col items-center cursor-help",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-300 font-medium",children:[(0,a.jsx)("span",{children:(null===(o=e.fee)||void 0===o?void 0:o.amount)?"".concat(e.fee.amount," €"):"0.70 €"}),(0,a.jsx)("span",{className:"text-[#09b1ba]",children:"\uD83D\uDEE1️"})]}),(0,a.jsx)("span",{className:"text-[10px] text-gray-500 uppercase",children:"Prot."}),(0,a.jsx)("div",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 hidden group-hover/shield:block w-48 bg-black/90 text-white text-xs p-2 rounded z-10 border border-gray-700 shadow-xl",children:"Buyer Protection Fee included. (0.70€ + 5% of item price)"})]}),(0,a.jsx)("span",{className:"text-gray-500 text-xl font-light",children:"="}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-xl font-bold text-[#09b1ba]",children:(null===(n=e.total_estimate)||void 0===n?void 0:n.amount)?"".concat(e.total_estimate.amount," €"):"".concat((((null===(l=e.price)||void 0===l?void 0:l.amount)||0)+((null===(c=e.fee)||void 0===c?void 0:c.amount)||0)+((null===(d=e.shipping)||void 0===d?void 0:d.amount)||2.99)).toFixed(2)," €")}),(0,a.jsxs)("div",{className:"relative group/total cursor-help",children:[(0,a.jsx)("span",{className:"text-[10px] text-[#09b1ba]/70 uppercase border-b border-dotted border-[#09b1ba]/50",children:"Total Est."}),(0,a.jsx)("div",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 hidden group-hover/total:block w-40 bg-black/90 text-white text-xs p-2 rounded z-10 border border-gray-700 shadow-xl whitespace-normal text-center",children:"Prix + Port (est.) + Protection"})]})]})]})]}),(0,a.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"bg-[#2a3142] hover:bg-[#09b1ba] text-white p-3 rounded-full transition-colors flex-shrink-0",children:(0,a.jsx)(i,{className:"w-6 h-6"})})]},e.id)}),0===h.length&&!d&&(0,a.jsx)("div",{className:"text-center py-20 text-gray-500",children:"Ready to snipe. Enter a keyword above."})]})]})})}},68435:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthProvider:()=>s});var a=r(95155),o=r(12115),n=r(80022),l=r(85534);let i=(0,o.createContext)(void 0);function s(e){let{children:t}=e,[r,s]=(0,o.useState)(null),[c,d]=(0,o.useState)(null),[u,h]=(0,o.useState)(!0);(0,o.useEffect)(()=>{let e=localStorage.getItem("rc_token");e?(d(e),(0,l.Ni)(e).then(e=>{e?s(e):p()}).finally(()=>h(!1))):h(!1)},[]);let m=async e=>{let t=await (0,l.XL)(e);t&&t.access_token&&(localStorage.setItem("rc_token",t.access_token),d(t.access_token),s(await (0,l.Ni)(t.access_token)))},p=()=>{localStorage.removeItem("rc_token"),d(null),s(null)},x="dummy-client-id-for-static-build";x||console.error("CRITICAL: NEXT_PUBLIC_GOOGLE_CLIENT_ID is missing. Google Login will fail.");let v=async()=>{c&&s(await (0,l.Ni)(c))};return(0,a.jsx)(n.G_,{clientId:x,children:(0,a.jsx)(i.Provider,{value:{user:r,token:c,login:m,logout:p,refreshUser:v,isAuthenticated:!!r,loading:u},children:t})})}function c(){let e=(0,o.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},85534:(e,t,r)=>{"use strict";r.d(t,{$_:()=>b,CG:()=>j,Go:()=>N,Li:()=>p,Ni:()=>u,R1:()=>n,Ri:()=>l,Sb:()=>x,Sk:()=>c,Sz:()=>s,TK:()=>v,UQ:()=>i,XL:()=>d,X_:()=>h,bC:()=>f,e9:()=>o,fA:()=>y,jg:()=>g,mQ:()=>w,nL:()=>m});var a=r(93681);function o(){return a.H}async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6?arguments[6]:void 0;try{return(await a.u.get("/products",{params:{console:e,limit:t,genre:r,type:o,sort:n,skip:l,search:i}})).data}catch(e){return console.error("Error fetching products:",e),[]}}async function l(e){try{return(await a.u.get("/products/search/grouped",{params:{query:e}})).data}catch(e){return console.error("Error searching products grouped:",e),{}}}async function i(e){try{let t=await a.u.get("/products/".concat(e,"/listings"),{params:{_t:new Date().getTime()}}),r="true"===t.headers["x-is-stale"];return{data:t.data,isStale:r,status:t.status}}catch(e){var t;return{data:[],isStale:!1,status:(null===(t=e.response)||void 0===t?void 0:t.status)||500}}}async function s(e){try{return(await a.u.get("/products/".concat(e,"/related"))).data}catch(e){return console.error("Error fetching related products:",e),[]}}async function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0;try{return(await a.u.get("/games/",{params:{console:e,limit:t,genre:r,type:i,sort:o,skip:n,search:l}})).data}catch(e){return console.error("Error fetching games:",e),[]}}async function d(e){try{return(await a.u.post("/auth/google",{credential:e})).data}catch(e){var t,r;throw console.error("Google Login failed",e),Error((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.detail)||e.message||"Login failed")}}async function u(e){try{return(await a.u.get("/auth/me")).data}catch(e){return null}}async function h(e){try{return(await a.u.get("/collection/")).data}catch(e){return console.error("Failed to fetch collection",e),[]}}async function m(e,t,r,o,n){try{return(await a.u.post("/collection/",{product_id:t,condition:r,paid_price:n,notes:o})).data}catch(e){var l,i;throw console.error("Failed to add to collection",e),Error((null===(i=e.response)||void 0===i?void 0:null===(l=i.data)||void 0===l?void 0:l.detail)||"Failed to add to collection")}}async function p(e,t,r){try{return(await a.u.put("/collection/".concat(t),r)).data}catch(e){var o,n;throw console.error("Failed to update collection item",e),Error((null===(n=e.response)||void 0===n?void 0:null===(o=n.data)||void 0===o?void 0:o.detail)||"Failed to update item")}}async function x(e,t){try{return await a.u.delete("/collection/".concat(t)),!0}catch(e){return console.error("Failed to delete item",e),!1}}async function v(e,t){try{return(await a.u.put("/auth/me",t)).data}catch(e){throw e}}async function f(e){try{return(await a.u.get("/portfolio/summary")).data}catch(e){return console.error("Failed to fetch portfolio summary",e),{total_value:0,item_count:0,console_count:0,top_items:[]}}}async function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;try{return(await a.u.get("/portfolio/history",{params:{range_days:t}})).data}catch(e){return console.error("Failed to fetch portfolio history",e),[]}}async function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;try{return(await a.u.get("/portfolio/movers",{params:{days:t}})).data}catch(e){return console.error("Failed to fetch portfolio movers",e),{gainers:[],losers:[]}}}async function w(e){try{return(await a.u.get("/portfolio/debug")).data}catch(e){return console.error("Failed to fetch portfolio debug",e),{error:"Failed to fetch debug info"}}}async function y(e){try{return(await a.u.get("/portfolio/dashboard")).data}catch(e){return console.error("Failed to fetch portfolio dashboard",e),null}}async function j(e,t){let r=new FormData;r.append("file",e);try{return(await a.u.post("/import/upload",r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){var o,n;throw console.error("CSV upload failed",e),Error((null===(n=e.response)||void 0===n?void 0:null===(o=n.data)||void 0===o?void 0:o.detail)||"Upload failed")}}async function N(e,t){try{return(await a.u.post("/import/confirm",{items:e})).data}catch(e){var r,o;throw console.error("Bulk import failed",e),Error((null===(o=e.response)||void 0===o?void 0:null===(r=o.data)||void 0===r?void 0:r.detail)||"Import failed")}}},93681:(e,t,r)=>{"use strict";r.d(t,{H:()=>o,u:()=>n});var a=r(82651);let o="".concat("http://127.0.0.1:8000","/api/v1"),n=a.A.create({baseURL:o,timeout:12e4,headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{{let t=localStorage.getItem("rc_token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>Promise.reject(e))}},e=>{var t=t=>e(e.s=t);e.O(0,[651,441,517,358],()=>t(86719)),_N_E=e.O()}]);