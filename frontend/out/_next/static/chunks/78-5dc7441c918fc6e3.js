"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[78],{68435:(t,e,r)=>{r.d(e,{A:()=>u,AuthProvider:()=>l});var o=r(95155),a=r(12115),n=r(80022),c=r(85534);let i=(0,a.createContext)(void 0);function l(t){let{children:e}=t,[r,l]=(0,a.useState)(null),[u,s]=(0,a.useState)(null),[d,h]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let t=localStorage.getItem("rc_token");t?(s(t),(0,c.Ni)(t).then(t=>{t?l(t):p()}).finally(()=>h(!1))):h(!1)},[]);let f=async t=>{let e=await (0,c.XL)(t);e&&e.access_token&&(localStorage.setItem("rc_token",e.access_token),s(e.access_token),l(await (0,c.Ni)(e.access_token)))},p=()=>{localStorage.removeItem("rc_token"),s(null),l(null)},g="dummy-client-id-for-static-build";g||console.error("CRITICAL: NEXT_PUBLIC_GOOGLE_CLIENT_ID is missing. Google Login will fail.");let v=async()=>{u&&l(await (0,c.Ni)(u))};return(0,o.jsx)(n.G_,{clientId:g,children:(0,o.jsx)(i.Provider,{value:{user:r,token:u,login:f,logout:p,refreshUser:v,isAuthenticated:!!r,loading:d},children:e})})}function u(){let t=(0,a.useContext)(i);if(void 0===t)throw Error("useAuth must be used within an AuthProvider");return t}},31558:(t,e,r)=>{r.d(e,{CurrencyProvider:()=>c,H:()=>i});var o=r(95155),a=r(12115);let n=(0,a.createContext)(void 0);function c(t){let{children:e}=t,[r,c]=(0,a.useState)("USD");return(0,a.useEffect)(()=>{let t=localStorage.getItem("retrocharting_currency");t&&("USD"===t||"EUR"===t||"GBP"===t)&&c(t)},[]),(0,o.jsx)(n.Provider,{value:{currency:r,setCurrency:t=>{c(t),localStorage.setItem("retrocharting_currency",t)}},children:e})}function i(){let t=(0,a.useContext)(n);if(void 0===t)throw Error("useCurrency must be used within a CurrencyProvider");return t}},85534:(t,e,r)=>{r.d(e,{$_:()=>w,CG:()=>b,Go:()=>S,Li:()=>p,Ni:()=>d,R1:()=>n,Ri:()=>c,Sb:()=>g,Sk:()=>u,Sz:()=>l,TK:()=>v,UQ:()=>i,XL:()=>s,X_:()=>h,bC:()=>y,e9:()=>a,fA:()=>E,jg:()=>m,mQ:()=>_,nL:()=>f});var o=r(93681);function a(){return o.H}async function n(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6?arguments[6]:void 0;try{return(await o.u.get("/products",{params:{console:t,limit:e,genre:r,type:a,sort:n,skip:c,search:i}})).data}catch(t){return console.error("Error fetching products:",t),[]}}async function c(t){try{return(await o.u.get("/products/search/grouped",{params:{query:t}})).data}catch(t){return console.error("Error searching products grouped:",t),{}}}async function i(t){try{let e=await o.u.get("/products/".concat(t,"/listings"),{params:{_t:new Date().getTime()}}),r="true"===e.headers["x-is-stale"];return{data:e.data,isStale:r,status:e.status}}catch(t){var e;return{data:[],isStale:!1,status:(null===(e=t.response)||void 0===e?void 0:e.status)||500}}}async function l(t){try{return(await o.u.get("/products/".concat(t,"/related"))).data}catch(t){return console.error("Error fetching related products:",t),[]}}async function u(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0;try{return(await o.u.get("/games/",{params:{console:t,limit:e,genre:r,type:i,sort:a,skip:n,search:c}})).data}catch(t){return console.error("Error fetching games:",t),[]}}async function s(t){try{return(await o.u.post("/auth/google",{credential:t})).data}catch(t){var e,r;throw console.error("Google Login failed",t),Error((null===(r=t.response)||void 0===r?void 0:null===(e=r.data)||void 0===e?void 0:e.detail)||t.message||"Login failed")}}async function d(t){try{return(await o.u.get("/auth/me")).data}catch(t){return null}}async function h(t){try{return(await o.u.get("/collection/")).data}catch(t){return console.error("Failed to fetch collection",t),[]}}async function f(t,e,r,a,n){try{return(await o.u.post("/collection/",{product_id:e,condition:r,paid_price:n,notes:a})).data}catch(t){var c,i;throw console.error("Failed to add to collection",t),Error((null===(i=t.response)||void 0===i?void 0:null===(c=i.data)||void 0===c?void 0:c.detail)||"Failed to add to collection")}}async function p(t,e,r){try{return(await o.u.put("/collection/".concat(e),r)).data}catch(t){var a,n;throw console.error("Failed to update collection item",t),Error((null===(n=t.response)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.detail)||"Failed to update item")}}async function g(t,e){try{return await o.u.delete("/collection/".concat(e)),!0}catch(t){return console.error("Failed to delete item",t),!1}}async function v(t,e){try{return(await o.u.put("/auth/me",e)).data}catch(t){throw t}}async function y(t){try{return(await o.u.get("/portfolio/summary")).data}catch(t){return console.error("Failed to fetch portfolio summary",t),{total_value:0,item_count:0,console_count:0,top_items:[]}}}async function m(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;try{return(await o.u.get("/portfolio/history",{params:{range_days:e}})).data}catch(t){return console.error("Failed to fetch portfolio history",t),[]}}async function w(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;try{return(await o.u.get("/portfolio/movers",{params:{days:e}})).data}catch(t){return console.error("Failed to fetch portfolio movers",t),{gainers:[],losers:[]}}}async function _(t){try{return(await o.u.get("/portfolio/debug")).data}catch(t){return console.error("Failed to fetch portfolio debug",t),{error:"Failed to fetch debug info"}}}async function E(t){try{return(await o.u.get("/portfolio/dashboard")).data}catch(t){return console.error("Failed to fetch portfolio dashboard",t),null}}async function b(t,e){let r=new FormData;r.append("file",t);try{return(await o.u.post("/import/upload",r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(t){var a,n;throw console.error("CSV upload failed",t),Error((null===(n=t.response)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.detail)||"Upload failed")}}async function S(t,e){try{return(await o.u.post("/import/confirm",{items:t})).data}catch(t){var r,a;throw console.error("Bulk import failed",t),Error((null===(a=t.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.detail)||"Import failed")}}},93681:(t,e,r)=>{r.d(e,{H:()=>a,u:()=>n});var o=r(82651);let a="".concat("http://127.0.0.1:8000","/api/v1"),n=o.A.create({baseURL:a,timeout:12e4,headers:{"Content-Type":"application/json"}});n.interceptors.request.use(t=>{{let e=localStorage.getItem("rc_token");e&&(t.headers.Authorization="Bearer ".concat(e))}return t},t=>Promise.reject(t)),n.interceptors.response.use(t=>t,t=>Promise.reject(t))},11977:(t,e,r)=>{r.d(e,{$g:()=>l,Q3:()=>i,Qn:()=>n,Tt:()=>c,VK:()=>a});let o={USD:1,EUR:.95,GBP:.79},a=[{code:"USD",label:"USD ($)",symbol:"$"},{code:"EUR",label:"EUR (€)",symbol:"€"},{code:"GBP",label:"GBP (\xa3)",symbol:"\xa3"}];function n(t){let e=a.find(e=>e.code===t);return e?e.symbol:"$"}function c(t,e){return null==t?null:t*(o[e]||1)}function i(t,e){let r=o[e]||1;return 0===r?0:t/r}function l(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en-US";if(null==t)return"--";let o=c(t,e);if(null===o)return"--";try{return new Intl.NumberFormat(r,{style:"currency",currency:e}).format(o)}catch(t){return"".concat(e," ").concat(o.toFixed(2))}}}}]);