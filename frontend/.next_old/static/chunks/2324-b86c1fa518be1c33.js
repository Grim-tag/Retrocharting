"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2324],{68435:(t,e,r)=>{r.d(e,{A:()=>u,AuthProvider:()=>s});var o=r(95155),a=r(12115),n=r(80022),c=r(85534),l=r(2818);let i=(0,a.createContext)(void 0);function s(t){let{children:e}=t,[r,s]=(0,a.useState)(null),[u,d]=(0,a.useState)(null),[p,h]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let t=localStorage.getItem("rc_token");t?(d(t),(0,c.Ni)(t).then(t=>{t?s(t):y()}).finally(()=>h(!1))):h(!1)},[]);let f=async t=>{let e=await (0,c.XL)(t);e&&e.access_token&&(localStorage.setItem("rc_token",e.access_token),d(e.access_token),s(await (0,c.Ni)(e.access_token)))},y=()=>{localStorage.removeItem("rc_token"),d(null),s(null)},g=l.env.NEXT_PUBLIC_GOOGLE_CLIENT_ID||"";g||console.error("CRITICAL: NEXT_PUBLIC_GOOGLE_CLIENT_ID is missing. Google Login will fail.");let v=async()=>{u&&s(await (0,c.Ni)(u))};return(0,o.jsx)(n.G_,{clientId:g,children:(0,o.jsx)(i.Provider,{value:{user:r,token:u,login:f,logout:y,refreshUser:v,isAuthenticated:!!r,loading:p},children:e})})}function u(){let t=(0,a.useContext)(i);if(void 0===t)throw Error("useAuth must be used within an AuthProvider");return t}},31558:(t,e,r)=>{r.d(e,{CurrencyProvider:()=>c,H:()=>l});var o=r(95155),a=r(12115);let n=(0,a.createContext)(void 0);function c(t){let{children:e}=t,[r,c]=(0,a.useState)("USD");return(0,a.useEffect)(()=>{let t=localStorage.getItem("retrocharting_currency");t&&("USD"===t||"EUR"===t||"GBP"===t)&&c(t)},[]),(0,o.jsx)(n.Provider,{value:{currency:r,setCurrency:t=>{c(t),localStorage.setItem("retrocharting_currency",t)}},children:e})}function l(){let t=(0,a.useContext)(n);if(void 0===t)throw Error("useCurrency must be used within a CurrencyProvider");return t}},85534:(t,e,r)=>{r.d(e,{$_:()=>S,CG:()=>E,Go:()=>P,Li:()=>y,Ni:()=>p,R1:()=>n,Ri:()=>l,Sb:()=>g,Sz:()=>s,T2:()=>u,TK:()=>v,UQ:()=>i,XL:()=>d,X_:()=>h,bC:()=>w,e9:()=>a,fA:()=>b,jg:()=>_,mQ:()=>C,nL:()=>f,updateProduct:()=>c,xM:()=>m});var o=r(93681);function a(){return o.H}async function n(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6?arguments[6]:void 0;try{return(await o.u.get("/products/",{params:{console:t,limit:e,genre:r,type:a,sort:n,skip:c,search:l}})).data}catch(t){return console.error("Error fetching products:",t),[]}}async function c(t,e,r){try{return(await o.u.put("/products/".concat(t),e)).data}catch(e){return console.error("Error updating product ".concat(t,":"),e),null}}async function l(t){try{return(await o.u.get("/products/search/grouped",{params:{query:t}})).data}catch(t){return console.error("Error searching products grouped:",t),{}}}async function i(t){try{let e=await o.u.get("/products/".concat(t,"/listings"),{params:{_t:new Date().getTime()}}),r="true"===e.headers["x-is-stale"];return{data:e.data,isStale:r,status:e.status}}catch(t){var e;return{data:[],isStale:!1,status:(null===(e=t.response)||void 0===e?void 0:e.status)||500}}}async function s(t){try{return(await o.u.get("/products/".concat(t,"/related"))).data}catch(t){return console.error("Error fetching related products:",t),[]}}async function u(t,e,r,a){try{return await o.u.post("/translations/",{locale:t,key:e,value:r},{headers:{"X-Admin-Key":a}}),!0}catch(t){return console.error("Failed to save translation",t),!1}}async function d(t){try{return(await o.u.post("/auth/google",{credential:t})).data}catch(t){var e,r;throw console.error("Google Login failed",t),Error((null===(r=t.response)||void 0===r?void 0:null===(e=r.data)||void 0===e?void 0:e.detail)||t.message||"Login failed")}}async function p(t){try{return(await o.u.get("/auth/me")).data}catch(t){return null}}async function h(t){try{return(await o.u.get("/collection/")).data}catch(t){return console.error("Failed to fetch collection",t),[]}}async function f(t,e,r,a,n){try{return(await o.u.post("/collection/",{product_id:e,condition:r,paid_price:n,notes:a})).data}catch(t){var c,l;throw console.error("Failed to add to collection",t),Error((null===(l=t.response)||void 0===l?void 0:null===(c=l.data)||void 0===c?void 0:c.detail)||"Failed to add to collection")}}async function y(t,e,r){try{return(await o.u.put("/collection/".concat(e),r)).data}catch(t){var a,n;throw console.error("Failed to update collection item",t),Error((null===(n=t.response)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.detail)||"Failed to update item")}}async function g(t,e){try{return await o.u.delete("/collection/".concat(e)),!0}catch(t){return console.error("Failed to delete item",t),!1}}async function v(t,e){try{return(await o.u.put("/auth/me",e)).data}catch(t){throw t}}async function m(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;arguments.length>1&&arguments[1];try{return(await o.u.get("/products/stats/recently-scraped",{params:{limit:t}})).data}catch(t){return console.error("Failed to fetch recently scraped products",t),[]}}async function w(t){try{return(await o.u.get("/portfolio/summary")).data}catch(t){return console.error("Failed to fetch portfolio summary",t),{total_value:0,item_count:0,console_count:0,top_items:[]}}}async function _(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;try{return(await o.u.get("/portfolio/history",{params:{range_days:e}})).data}catch(t){return console.error("Failed to fetch portfolio history",t),[]}}async function S(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;try{return(await o.u.get("/portfolio/movers",{params:{days:e}})).data}catch(t){return console.error("Failed to fetch portfolio movers",t),{gainers:[],losers:[]}}}async function C(t){try{return(await o.u.get("/portfolio/debug")).data}catch(t){return console.error("Failed to fetch portfolio debug",t),{error:"Failed to fetch debug info"}}}async function b(t){try{return(await o.u.get("/portfolio/dashboard")).data}catch(t){return console.error("Failed to fetch portfolio dashboard",t),null}}async function E(t,e){let r=new FormData;r.append("file",t);try{return(await o.u.post("/import/upload",r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(t){var a,n;throw console.error("CSV upload failed",t),Error((null===(n=t.response)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.detail)||"Upload failed")}}async function P(t,e){try{return(await o.u.post("/import/confirm",{items:t})).data}catch(t){var r,a;throw console.error("Bulk import failed",t),Error((null===(a=t.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.detail)||"Import failed")}}},93681:(t,e,r)=>{r.d(e,{H:()=>c,u:()=>l});var o=r(82651),a=r(2818);let n=a.env.NEXT_PUBLIC_API_URL?a.env.NEXT_PUBLIC_API_URL:"https://retrocharting-backend.onrender.com",c="".concat(n,"/api/v1"),l=o.A.create({baseURL:c,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(t=>{{let e=localStorage.getItem("rc_token");e&&(t.headers.Authorization="Bearer ".concat(e))}return t},t=>Promise.reject(t)),l.interceptors.response.use(t=>t,t=>Promise.reject(t))},11977:(t,e,r)=>{r.d(e,{$g:()=>i,Q3:()=>l,Qn:()=>n,Tt:()=>c,VK:()=>a});let o={USD:1,EUR:.95,GBP:.79},a=[{code:"USD",label:"USD ($)",symbol:"$"},{code:"EUR",label:"EUR (€)",symbol:"€"},{code:"GBP",label:"GBP (\xa3)",symbol:"\xa3"}];function n(t){let e=a.find(e=>e.code===t);return e?e.symbol:"$"}function c(t,e){return null==t?null:t*(o[e]||1)}function l(t,e){let r=o[e]||1;return 0===r?0:t/r}function i(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en-US";if(null==t)return"--";let o=c(t,e);if(null===o)return"--";try{return new Intl.NumberFormat(r,{style:"currency",currency:e}).format(o)}catch(t){return"".concat(e," ").concat(o.toFixed(2))}}},71284:(t,e,r)=>{r.d(e,{i:()=>a,w:()=>o});let o={games:{en:"games",fr:"jeux-video"},consoles:{en:"consoles",fr:"consoles"},accessories:{en:"accessories",fr:"accessoires"},collectibles:{en:"collectibles",fr:"objets-de-collection"}},a={};Object.entries(o).forEach(t=>{let[e,r]=t;Object.entries(r).forEach(t=>{let[r,o]=t;a[r]||(a[r]={}),a[r][o]=e})})},21567:(t,e,r)=>{r.d(e,{sq:()=>a});var o=r(71284);function a(t){var e;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",a="games";t.genre&&["Accessories","Controllers"].includes(t.genre)?a="accessories":t.genre&&["Systems","Console","Consoles"].includes(t.genre)&&(a="consoles");let n=(null===(e=o.w[a])||void 0===e?void 0:e[r])||a,c=(t.product_name||"unknown-product").toLowerCase(),l=(c=c.replace(/[\[\]\(\)]/g,"")).replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),i=(function(t){let e={"Playstation 5":"PS5","Playstation 4":"PS4","Playstation 3":"PS3","Playstation 2":"PS2",Playstation:"PS1","Nintendo Entertainment System":"NES","Super Nintendo":"SNES","Nintendo 64":"N64",GameCube:"GCN","Game Boy Advance":"GBA","Game Boy Color":"GBC","Sega Genesis":"Genesis","Sega Dreamcast":"Dreamcast","Sega Saturn":"Saturn","Xbox Series X":"Xbox Series X","Xbox One":"Xbox One","Xbox 360":"Xbox 360"},r=t.trim();for(let t in e)if(t.toLowerCase()===r.toLowerCase())return e[t];return t})(t.console_name||"unknown-console").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),s=i.replace(/^(pal-|jp-|japan-)/,""),u=i.match(/^(pal-|jp-|japan-)/),d=u?u[0]:"",p=l;l.includes(s)?d&&!p.startsWith(d)&&(p="".concat(d).concat(p)):p="".concat(l,"-").concat(i);let h=r?r.toLowerCase():"en",f="".concat(p,"-").concat({fr:"cote-prix",en:"prices"}[h]||"prices","-").concat(t.id);return"en"===r?"/".concat(n,"/").concat(f):"/".concat(r,"/").concat(n,"/").concat(f)}}}]);