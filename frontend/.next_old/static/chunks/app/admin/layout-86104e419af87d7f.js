(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7581],{96900:(e,t,r)=>{Promise.resolve().then(r.bind(r,48718))},80022:(e,t,r)=>{"use strict";r.d(t,{G_:()=>n,j:()=>i});var o=r(12115);let a=(0,o.createContext)(null);function n(e){let{clientId:t,nonce:r,onScriptLoadSuccess:n,onScriptLoadError:l,children:i}=e,s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{nonce:t,onScriptLoadSuccess:r,onScriptLoadError:a}=e,[n,l]=(0,o.useState)(!1),i=(0,o.useRef)(r);i.current=r;let s=(0,o.useRef)(a);return s.current=a,(0,o.useEffect)(()=>{let e=document.createElement("script");return e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.nonce=t,e.onload=()=>{var e;l(!0),null===(e=i.current)||void 0===e||e.call(i)},e.onerror=()=>{var e;l(!1),null===(e=s.current)||void 0===e||e.call(s)},document.body.appendChild(e),()=>{document.body.removeChild(e)}},[t]),n}({nonce:r,onScriptLoadSuccess:n,onScriptLoadError:l}),c=(0,o.useMemo)(()=>({clientId:t,scriptLoadedSuccessfully:s}),[t,s]);return o.createElement(a.Provider,{value:c},i)}let l={large:40,medium:32,small:20};function i(e){let{onSuccess:t,onError:r,useOneTap:n,promptMomentNotification:i,type:s="standard",theme:c="outline",size:u="large",text:d,shape:h,logo_alignment:f,width:v,locale:m,click_listener:p,containerProps:g,...y}=e,x=(0,o.useRef)(null),{clientId:w,scriptLoadedSuccessfully:b}=function(){let e=(0,o.useContext)(a);if(!e)throw Error("Google OAuth components must be used within GoogleOAuthProvider");return e}(),_=(0,o.useRef)(t);_.current=t;let j=(0,o.useRef)(r);j.current=r;let N=(0,o.useRef)(i);return N.current=i,(0,o.useEffect)(()=>{var e,t,r,o,a,l,i,g,C;if(b)return null===(r=null===(t=null===(e=null==window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===t?void 0:t.id)||void 0===r||r.initialize({client_id:w,callback:e=>{var t,r;if(!(null==e?void 0:e.credential))return null===(t=j.current)||void 0===t?void 0:t.call(j);let{credential:o,select_by:a}=e;_.current({credential:o,clientId:null!==(r=null==e?void 0:e.clientId)&&void 0!==r?r:null==e?void 0:e.client_id,select_by:a})},...y}),null===(l=null===(a=null===(o=null==window?void 0:window.google)||void 0===o?void 0:o.accounts)||void 0===a?void 0:a.id)||void 0===l||l.renderButton(x.current,{type:s,theme:c,size:u,text:d,shape:h,logo_alignment:f,width:v,locale:m,click_listener:p}),n&&(null===(C=null===(g=null===(i=null==window?void 0:window.google)||void 0===i?void 0:i.accounts)||void 0===g?void 0:g.id)||void 0===C||C.prompt(N.current)),()=>{var e,t,r;n&&(null===(r=null===(t=null===(e=null==window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===t?void 0:t.id)||void 0===r||r.cancel())}},[w,b,n,s,c,u,d,h,f,v,m]),o.createElement("div",{...g,ref:x,style:{height:l[u],...null==g?void 0:g.style}})}},76046:(e,t,r)=>{"use strict";var o=r(66658);r.o(o,"useParams")&&r.d(t,{useParams:function(){return o.useParams}}),r.o(o,"usePathname")&&r.d(t,{usePathname:function(){return o.usePathname}}),r.o(o,"useRouter")&&r.d(t,{useRouter:function(){return o.useRouter}}),r.o(o,"useSearchParams")&&r.d(t,{useSearchParams:function(){return o.useSearchParams}})},48718:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var o=r(95155),a=r(12115),n=r(48173),l=r.n(n),i=r(76046),s=r(28379),c=r.n(s);r(30347);var u=r(68435),d=r(31558);function h(e){let{children:t}=e;return(0,o.jsx)("html",{lang:"en",children:(0,o.jsx)("body",{className:"".concat(c().variable," antialiased bg-[#0f121e] text-white font-sans flex h-screen"),children:(0,o.jsx)(d.CurrencyProvider,{children:(0,o.jsx)(u.AuthProvider,{children:(0,o.jsx)(f,{children:t})})})})})}function f(e){let{children:t}=e,{user:r,loading:n,isAuthenticated:s}=(0,u.A)(),c=(0,i.useRouter)(),[d,h]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{h(!0)},[]),(0,a.useEffect)(()=>{n||s&&(null==r?void 0:r.is_admin)||c.push("/")},[s,r,n,c]),!d||n)?(0,o.jsx)("div",{className:"min-h-screen bg-[#0f121e] flex items-center justify-center text-white",children:"Loading..."}):(null==r?void 0:r.is_admin)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("aside",{className:"w-64 border-r border-[#2a3142] bg-[#1f2533] flex flex-col",children:[(0,o.jsx)("div",{className:"p-6 border-b border-[#2a3142]",children:(0,o.jsxs)(l(),{href:"/",className:"text-xl font-bold tracking-wider text-white notranslate",translate:"no",children:["RETRO",(0,o.jsx)("span",{className:"text-[#ff6600]",children:"CHARTING"}),(0,o.jsx)("span",{className:"block text-[10px] text-gray-500 mt-1",children:"ADMIN CONSOLE"})]})}),(0,o.jsxs)("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[(0,o.jsx)(v,{href:"/admin/dashboard",label:"Dashboard"}),(0,o.jsx)(v,{href:"/admin/amazon",label:"Amazon Pricing"}),(0,o.jsx)(v,{href:"/admin/games",label:"Games Catalog"}),(0,o.jsx)(v,{href:"/admin/consoles",label:"Consoles Catalog"}),(0,o.jsx)(v,{href:"/admin/accessories",label:"Accessories Catalog"}),(0,o.jsx)(v,{href:"/admin/health",label:"Catalog Health"}),(0,o.jsx)(v,{href:"/admin/comments",label:"Comments"}),(0,o.jsx)(v,{href:"/admin/translations",label:"Translations"}),(0,o.jsx)("div",{className:"pt-4 mt-4 border-t border-[#2a3142]",children:(0,o.jsx)(v,{href:"/",label:"Back to Site"})})]}),(0,o.jsx)("div",{className:"p-4 border-t border-[#2a3142]",children:(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)("div",{className:"w-8 h-8 rounded-full bg-[#ff6600] flex items-center justify-center font-bold",children:"A"}),(0,o.jsxs)("div",{className:"text-sm",children:[(0,o.jsx)("div",{className:"font-medium",children:"Admin"}),(0,o.jsx)("div",{className:"text-xs text-gray-500",children:"Super User"})]})]})})]}),(0,o.jsxs)("main",{className:"flex-1 overflow-y-auto",children:[(0,o.jsx)("header",{className:"h-16 border-b border-[#2a3142] bg-[#1f2533] flex items-center justify-between px-8",children:(0,o.jsx)("h1",{className:"font-medium text-lg",children:"Dashboard"})}),(0,o.jsx)("div",{className:"p-8",children:t})]})]}):null}function v(e){let{href:t,label:r}=e;return(0,o.jsx)(l(),{href:t,className:"block px-4 py-2 rounded text-gray-300 hover:bg-[#2a3142] hover:text-white transition-colors text-sm font-medium",children:r})}},68435:(e,t,r)=>{"use strict";r.d(t,{A:()=>u,AuthProvider:()=>c});var o=r(95155),a=r(12115),n=r(80022),l=r(85534),i=r(2818);let s=(0,a.createContext)(void 0);function c(e){let{children:t}=e,[r,c]=(0,a.useState)(null),[u,d]=(0,a.useState)(null),[h,f]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=localStorage.getItem("rc_token");e?(d(e),(0,l.Ni)(e).then(e=>{e?c(e):m()}).finally(()=>f(!1))):f(!1)},[]);let v=async e=>{let t=await (0,l.XL)(e);t&&t.access_token&&(localStorage.setItem("rc_token",t.access_token),d(t.access_token),c(await (0,l.Ni)(t.access_token)))},m=()=>{localStorage.removeItem("rc_token"),d(null),c(null)},p=i.env.NEXT_PUBLIC_GOOGLE_CLIENT_ID||"";p||console.error("CRITICAL: NEXT_PUBLIC_GOOGLE_CLIENT_ID is missing. Google Login will fail.");let g=async()=>{u&&c(await (0,l.Ni)(u))};return(0,o.jsx)(n.G_,{clientId:p,children:(0,o.jsx)(s.Provider,{value:{user:r,token:u,login:v,logout:m,refreshUser:g,isAuthenticated:!!r,loading:h},children:t})})}function u(){let e=(0,a.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},31558:(e,t,r)=>{"use strict";r.d(t,{CurrencyProvider:()=>l,H:()=>i});var o=r(95155),a=r(12115);let n=(0,a.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,a.useState)("USD");return(0,a.useEffect)(()=>{let e=localStorage.getItem("retrocharting_currency");e&&("USD"===e||"EUR"===e||"GBP"===e)&&l(e)},[]),(0,o.jsx)(n.Provider,{value:{currency:r,setCurrency:e=>{l(e),localStorage.setItem("retrocharting_currency",e)}},children:t})}function i(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useCurrency must be used within a CurrencyProvider");return e}},85534:(e,t,r)=>{"use strict";r.d(t,{$_:()=>b,CG:()=>N,Go:()=>C,Li:()=>m,Ni:()=>h,R1:()=>n,Ri:()=>i,Sb:()=>p,Sz:()=>c,T2:()=>u,TK:()=>g,UQ:()=>s,XL:()=>d,X_:()=>f,bC:()=>x,e9:()=>a,fA:()=>j,jg:()=>w,mQ:()=>_,nL:()=>v,updateProduct:()=>l,xM:()=>y});var o=r(93681);function a(){return o.H}async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6?arguments[6]:void 0;try{return(await o.u.get("/products/",{params:{console:e,limit:t,genre:r,type:a,sort:n,skip:l,search:i}})).data}catch(e){return console.error("Error fetching products:",e),[]}}async function l(e,t,r){try{return(await o.u.put("/products/".concat(e),t)).data}catch(t){return console.error("Error updating product ".concat(e,":"),t),null}}async function i(e){try{return(await o.u.get("/products/search/grouped",{params:{query:e}})).data}catch(e){return console.error("Error searching products grouped:",e),{}}}async function s(e){try{let t=await o.u.get("/products/".concat(e,"/listings"),{params:{_t:new Date().getTime()}}),r="true"===t.headers["x-is-stale"];return{data:t.data,isStale:r,status:t.status}}catch(e){var t;return{data:[],isStale:!1,status:(null===(t=e.response)||void 0===t?void 0:t.status)||500}}}async function c(e){try{return(await o.u.get("/products/".concat(e,"/related"))).data}catch(e){return console.error("Error fetching related products:",e),[]}}async function u(e,t,r,a){try{return await o.u.post("/translations/",{locale:e,key:t,value:r},{headers:{"X-Admin-Key":a}}),!0}catch(e){return console.error("Failed to save translation",e),!1}}async function d(e){try{return(await o.u.post("/auth/google",{credential:e})).data}catch(e){var t,r;throw console.error("Google Login failed",e),Error((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.detail)||e.message||"Login failed")}}async function h(e){try{return(await o.u.get("/auth/me")).data}catch(e){return null}}async function f(e){try{return(await o.u.get("/collection/")).data}catch(e){return console.error("Failed to fetch collection",e),[]}}async function v(e,t,r,a,n){try{return(await o.u.post("/collection/",{product_id:t,condition:r,paid_price:n,notes:a})).data}catch(e){var l,i;throw console.error("Failed to add to collection",e),Error((null===(i=e.response)||void 0===i?void 0:null===(l=i.data)||void 0===l?void 0:l.detail)||"Failed to add to collection")}}async function m(e,t,r){try{return(await o.u.put("/collection/".concat(t),r)).data}catch(e){var a,n;throw console.error("Failed to update collection item",e),Error((null===(n=e.response)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.detail)||"Failed to update item")}}async function p(e,t){try{return await o.u.delete("/collection/".concat(t)),!0}catch(e){return console.error("Failed to delete item",e),!1}}async function g(e,t){try{return(await o.u.put("/auth/me",t)).data}catch(e){throw e}}async function y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;arguments.length>1&&arguments[1];try{return(await o.u.get("/products/stats/recently-scraped",{params:{limit:e}})).data}catch(e){return console.error("Failed to fetch recently scraped products",e),[]}}async function x(e){try{return(await o.u.get("/portfolio/summary")).data}catch(e){return console.error("Failed to fetch portfolio summary",e),{total_value:0,item_count:0,console_count:0,top_items:[]}}}async function w(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;try{return(await o.u.get("/portfolio/history",{params:{range_days:t}})).data}catch(e){return console.error("Failed to fetch portfolio history",e),[]}}async function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;try{return(await o.u.get("/portfolio/movers",{params:{days:t}})).data}catch(e){return console.error("Failed to fetch portfolio movers",e),{gainers:[],losers:[]}}}async function _(e){try{return(await o.u.get("/portfolio/debug")).data}catch(e){return console.error("Failed to fetch portfolio debug",e),{error:"Failed to fetch debug info"}}}async function j(e){try{return(await o.u.get("/portfolio/dashboard")).data}catch(e){return console.error("Failed to fetch portfolio dashboard",e),null}}async function N(e,t){let r=new FormData;r.append("file",e);try{return(await o.u.post("/import/upload",r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){var a,n;throw console.error("CSV upload failed",e),Error((null===(n=e.response)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.detail)||"Upload failed")}}async function C(e,t){try{return(await o.u.post("/import/confirm",{items:e})).data}catch(e){var r,a;throw console.error("Bulk import failed",e),Error((null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.detail)||"Import failed")}}},93681:(e,t,r)=>{"use strict";r.d(t,{H:()=>l,u:()=>i});var o=r(82651),a=r(2818);let n=a.env.NEXT_PUBLIC_API_URL?a.env.NEXT_PUBLIC_API_URL:"https://retrocharting-backend.onrender.com",l="".concat(n,"/api/v1"),i=o.A.create({baseURL:l,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{{let t=localStorage.getItem("rc_token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,e=>Promise.reject(e))},30347:()=>{},28379:e=>{e.exports={style:{fontFamily:"'Poppins', 'Poppins Fallback'",fontStyle:"normal"},className:"__className_51684b",variable:"__variable_51684b"}}},e=>{var t=t=>e(e.s=t);e.O(0,[1550,7690,5714,2651,8173,8441,1517,7358],()=>t(96900)),_N_E=e.O()}]);