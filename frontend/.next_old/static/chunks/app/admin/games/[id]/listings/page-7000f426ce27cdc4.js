(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3192],{68040:(e,s,t)=>{Promise.resolve().then(t.bind(t,17996))},76046:(e,s,t)=>{"use strict";var a=t(66658);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},17996:(e,s,t)=>{"use strict";t.d(s,{default:()=>d});var a=t(95155),r=t(12115),l=t(76046),n=t(48173),c=t.n(n),i=t(2818);function d(){let e=(0,l.useParams)();(0,l.useRouter)();let s=null==e?void 0:e.id,[t,n]=(0,r.useState)([]),[d,o]=(0,r.useState)(!0),[u,x]=(0,r.useState)({url:"",price:"",currency:"EUR",source:"eBay",condition:"Used",seller:""}),h=async()=>{if(s){o(!0);try{let e=await fetch("".concat(i.env.NEXT_PUBLIC_API_URL,"/api/v1/products/").concat(s,"/listings"));if(e.ok){let s=await e.json();n(s.data||s)}}catch(e){console.error(e)}finally{o(!1)}}};(0,r.useEffect)(()=>{h()},[s]);let p=async e=>{e.preventDefault();try{let e=localStorage.getItem("rc_token"),t=await fetch("".concat(i.env.NEXT_PUBLIC_API_URL,"/api/v1/products/").concat(s,"/listings/manual"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({url:u.url,price:parseFloat(u.price),currency:u.currency,source:u.source,condition:u.condition,seller_name:u.seller})});if(t.ok)alert("Listing added!"),x({...u,url:"",price:""}),h();else{let e=await t.json();alert("Error: ".concat(e.detail||"Failed"))}}catch(e){alert("Error adding listing")}};return(0,a.jsxs)("div",{className:"text-white p-6 max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,a.jsx)(c(),{href:"/admin/games",className:"text-gray-400 hover:text-white",children:"â† Back to Catalog"}),(0,a.jsxs)("h1",{className:"text-2xl font-bold uppercase tracking-wider",children:["Manage Listings (ID: ",s,")"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"bg-[#1f2533] p-6 rounded border border-[#2a3142] h-fit",children:[(0,a.jsx)("h3",{className:"text-xl font-bold mb-4 text-[#ff6600]",children:"Add Listing"}),(0,a.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs uppercase text-gray-400 mb-1",children:"URL"}),(0,a.jsx)("input",{required:!0,type:"url",className:"w-full bg-[#0f121e] border border-[#2a3142] text-white p-2 rounded",value:u.url,onChange:e=>x({...u,url:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs uppercase text-gray-400 mb-1",children:"Price"}),(0,a.jsx)("input",{required:!0,type:"number",step:"0.01",className:"w-full bg-[#0f121e] border border-[#2a3142] text-white p-2 rounded",value:u.price,onChange:e=>x({...u,price:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs uppercase text-gray-400 mb-1",children:"Currency"}),(0,a.jsxs)("select",{className:"w-full bg-[#0f121e] border border-[#2a3142] text-white p-2 rounded",value:u.currency,onChange:e=>x({...u,currency:e.target.value}),children:[(0,a.jsx)("option",{value:"EUR",children:"EUR"}),(0,a.jsx)("option",{value:"USD",children:"USD"}),(0,a.jsx)("option",{value:"GBP",children:"GBP"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs uppercase text-gray-400 mb-1",children:"Source"}),(0,a.jsxs)("select",{className:"w-full bg-[#0f121e] border border-[#2a3142] text-white p-2 rounded",value:u.source,onChange:e=>x({...u,source:e.target.value}),children:[(0,a.jsx)("option",{value:"eBay",children:"eBay"}),(0,a.jsx)("option",{value:"Vinted",children:"Vinted"}),(0,a.jsx)("option",{value:"Leboncoin",children:"Leboncoin"}),(0,a.jsx)("option",{value:"Rakuten",children:"Rakuten"}),(0,a.jsx)("option",{value:"Manual",children:"Manual"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs uppercase text-gray-400 mb-1",children:"Condition"}),(0,a.jsxs)("select",{className:"w-full bg-[#0f121e] border border-[#2a3142] text-white p-2 rounded",value:u.condition,onChange:e=>x({...u,condition:e.target.value}),children:[(0,a.jsx)("option",{value:"Used",children:"Used"}),(0,a.jsx)("option",{value:"New",children:"New"}),(0,a.jsx)("option",{value:"CIB",children:"CIB"}),(0,a.jsx)("option",{value:"Loose",children:"Loose"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs uppercase text-gray-400 mb-1",children:"Seller (Optional)"}),(0,a.jsx)("input",{type:"text",className:"w-full bg-[#0f121e] border border-[#2a3142] text-white p-2 rounded",value:u.seller,onChange:e=>x({...u,seller:e.target.value})})]}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-[#ff6600] hover:bg-[#ff8533] text-white font-bold py-2 rounded transition-colors",children:"Add Listing"})]})]}),(0,a.jsx)("div",{className:"lg:col-span-2 bg-[#1f2533] border border-[#2a3142] rounded overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full text-left",children:[(0,a.jsx)("thead",{className:"bg-[#2a3142] text-gray-300 uppercase text-xs font-bold",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-4",children:"Source"}),(0,a.jsx)("th",{className:"p-4",children:"Title"}),(0,a.jsx)("th",{className:"p-4 text-right",children:"Price"}),(0,a.jsx)("th",{className:"p-4 text-center",children:"Deal?"}),(0,a.jsx)("th",{className:"p-4",children:"Link"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-[#2a3142] text-sm text-gray-300",children:d?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"p-4 text-center",children:"Loading..."})}):0===t.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"p-4 text-center",children:"No listings found."})}):t.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-[#252b3b]",children:[(0,a.jsx)("td",{className:"p-4",children:e.source}),(0,a.jsx)("td",{className:"p-4 max-w-xs truncate",title:e.title,children:e.title}),(0,a.jsxs)("td",{className:"p-4 text-right font-bold text-white",children:[e.price.toFixed(2)," ",e.currency]}),(0,a.jsx)("td",{className:"p-4 text-center",children:e.is_good_deal?(0,a.jsx)("span",{className:"text-green-500 font-bold",children:"YES"}):"-"}),(0,a.jsx)("td",{className:"p-4",children:(0,a.jsx)("a",{href:e.url,target:"_blank",className:"text-blue-400 hover:underline",children:"Open"})})]},e.id))})]})})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[8173,8441,1517,7358],()=>s(68040)),_N_E=e.O()}]);