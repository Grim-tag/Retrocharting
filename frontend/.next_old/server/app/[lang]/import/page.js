(()=>{var e={};e.id=29,e.ids=[29],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12412:e=>{"use strict";e.exports=require("assert")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},73496:e=>{"use strict";e.exports=require("http2")},55591:e=>{"use strict";e.exports=require("https")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},27910:e=>{"use strict";e.exports=require("stream")},83997:e=>{"use strict";e.exports=require("tty")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},1537:e=>{e.exports={style:{fontFamily:"'Poppins', 'Poppins Fallback'",fontStyle:"normal"},className:"__className_51684b",variable:"__variable_51684b"}},21372:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var s=r(70260),n=r(28203),a=r(25155),i=r.n(a),o=r(67292),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["[lang]",{children:["import",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,62502)),"C:\\Users\\charl\\collector\\frontend\\src\\app\\[lang]\\import\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,33687)),"C:\\Users\\charl\\collector\\frontend\\src\\app\\[lang]\\layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,65513)),"C:\\Users\\charl\\collector\\frontend\\src\\app\\[lang]\\loading.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\charl\\collector\\frontend\\src\\app\\[lang]\\import\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/[lang]/import/page",pathname:"/[lang]/import",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},939:(e,t,r)=>{Promise.resolve().then(r.bind(r,62502))},76963:(e,t,r)=>{Promise.resolve().then(r.bind(r,28146))},37323:(e,t,r)=>{"use strict";r.d(t,{default:()=>n.a});var s=r(37882),n=r.n(s)},37882:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return b},handleClientScriptLoad:function(){return x},initScriptLoader:function(){return h}});let s=r(25488),n=r(81063),a=r(45512),i=s._(r(55740)),o=n._(r(58009)),l=r(6302),c=r(31507),d=r(28903),u=new Map,p=new Set,m=e=>{if(i.default.preinit){e.forEach(e=>{i.default.preinit(e,{as:"style"})});return}},f=e=>{let{src:t,id:r,onLoad:s=()=>{},onReady:n=null,dangerouslySetInnerHTML:a,children:i="",strategy:o="afterInteractive",onError:l,stylesheets:d}=e,f=r||t;if(f&&p.has(f))return;if(u.has(t)){p.add(f),u.get(t).then(s,l);return}let x=()=>{n&&n(),p.add(f)},h=document.createElement("script"),g=new Promise((e,t)=>{h.addEventListener("load",function(t){e(),s&&s.call(this,t),x()}),h.addEventListener("error",function(e){t(e)})}).catch(function(e){l&&l(e)});a?(h.innerHTML=a.__html||"",x()):i?(h.textContent="string"==typeof i?i:Array.isArray(i)?i.join(""):"",x()):t&&(h.src=t,u.set(t,g)),(0,c.setAttributesFromProps)(h,e),"worker"===o&&h.setAttribute("type","text/partytown"),h.setAttribute("data-nscript",o),d&&m(d),document.body.appendChild(h)};function x(e){let{strategy:t="afterInteractive"}=e;"lazyOnload"===t?window.addEventListener("load",()=>{(0,d.requestIdleCallback)(()=>f(e))}):f(e)}function h(e){e.forEach(x),[...document.querySelectorAll('[data-nscript="beforeInteractive"]'),...document.querySelectorAll('[data-nscript="beforePageRender"]')].forEach(e=>{let t=e.id||e.getAttribute("src");p.add(t)})}function g(e){let{id:t,src:r="",onLoad:s=()=>{},onReady:n=null,strategy:c="afterInteractive",onError:u,stylesheets:m,...x}=e,{updateScripts:h,scripts:g,getIsSsr:b,appDir:y,nonce:v}=(0,o.useContext)(l.HeadManagerContext),j=(0,o.useRef)(!1);(0,o.useEffect)(()=>{let e=t||r;j.current||(n&&e&&p.has(e)&&n(),j.current=!0)},[n,t,r]);let w=(0,o.useRef)(!1);if((0,o.useEffect)(()=>{!w.current&&("afterInteractive"===c?f(e):"lazyOnload"===c&&("complete"===document.readyState?(0,d.requestIdleCallback)(()=>f(e)):window.addEventListener("load",()=>{(0,d.requestIdleCallback)(()=>f(e))})),w.current=!0)},[e,c]),("beforeInteractive"===c||"worker"===c)&&(h?(g[c]=(g[c]||[]).concat([{id:t,src:r,onLoad:s,onReady:n,onError:u,...x}]),h(g)):b&&b()?p.add(t||r):b&&!b()&&f(e)),y){if(m&&m.forEach(e=>{i.default.preinit(e,{as:"style"})}),"beforeInteractive"===c)return r?(i.default.preload(r,x.integrity?{as:"script",integrity:x.integrity,nonce:v,crossOrigin:x.crossOrigin}:{as:"script",nonce:v,crossOrigin:x.crossOrigin}),(0,a.jsx)("script",{nonce:v,dangerouslySetInnerHTML:{__html:"(self.__next_s=self.__next_s||[]).push("+JSON.stringify([r,{...x,id:t}])+")"}})):(x.dangerouslySetInnerHTML&&(x.children=x.dangerouslySetInnerHTML.__html,delete x.dangerouslySetInnerHTML),(0,a.jsx)("script",{nonce:v,dangerouslySetInnerHTML:{__html:"(self.__next_s=self.__next_s||[]).push("+JSON.stringify([0,{...x,id:t}])+")"}}));"afterInteractive"===c&&r&&i.default.preload(r,x.integrity?{as:"script",integrity:x.integrity,nonce:v,crossOrigin:x.crossOrigin}:{as:"script",nonce:v,crossOrigin:x.crossOrigin})}return null}Object.defineProperty(g,"__nextScript",{value:!0});let b=g;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},31507:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"setAttributesFromProps",{enumerable:!0,get:function(){return a}});let r={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv",noModule:"noModule"},s=["onLoad","onReady","dangerouslySetInnerHTML","children","onError","strategy","stylesheets"];function n(e){return["async","defer","noModule"].includes(e)}function a(e,t){for(let[a,i]of Object.entries(t)){if(!t.hasOwnProperty(a)||s.includes(a)||void 0===i)continue;let o=r[a]||a.toLowerCase();"SCRIPT"===e.tagName&&n(o)?e[o]=!!i:e.setAttribute(o,String(i)),(!1===i||"SCRIPT"===e.tagName&&n(o)&&(!i||"false"===i))&&(e.setAttribute(o,""),e.removeAttribute(o))}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6302:(e,t,r)=>{"use strict";e.exports=r(8104).vendored.contexts.HeadManagerContext},28146:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(45512),n=r(58009),a=r(79334),i=r(19333),o=r(69586);let l=`${(0,o.e9)()}/api/v1`;function c({params:e}){let{lang:t}=e,r=(0,a.useRouter)(),{token:c}=(0,i.A)(),[u,p]=(0,n.useState)(1),[m,f]=(0,n.useState)(null),[x,h]=(0,n.useState)(!1),[g,b]=(0,n.useState)(!1),[y,v]=(0,n.useState)(null),j=async()=>{if(y&&c){b(!0);try{let e=y.matches.map(e=>({product_id:e.match.id,condition:e.item.condition,paid_price:e.item.paid_price?parseFloat(e.item.paid_price):void 0,currency:e.item.currency,purchase_date:e.item.purchase_date,comment:e.item.comment})),s=await (0,o.Go)(e,c);alert(`Success! Imported ${s.imported} items.`),r.push(`/${t}/collection`)}catch(e){console.error(e),alert("Import failed. Please try again.")}finally{b(!1)}}},w=async()=>{if(m&&c){h(!0);try{let e=await (0,o.CG)(m,c);e&&(v(e),p(3))}catch(e){console.error(e),alert("Analysis failed. Please check your CSV format.")}finally{h(!1)}}};return(0,s.jsx)("div",{className:"min-h-screen bg-[#0f121e] text-white p-8",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsxs)("header",{className:"mb-8 flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Import Collection (CSV)"}),(0,s.jsx)("button",{onClick:()=>r.push(`/${t}/collection`),className:"text-gray-400 hover:text-white",children:"← Back to Collection"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[(0,s.jsxs)("div",{className:"col-span-1 space-y-4",children:[(0,s.jsx)(d,{current:u,step:1,title:"Download Template"}),(0,s.jsx)(d,{current:u,step:2,title:"Upload CSV"}),(0,s.jsx)(d,{current:u,step:3,title:"Review Matches"})]}),(0,s.jsxs)("div",{className:"col-span-3 bg-[#1f2533] p-8 rounded-xl border border-[#2a3142]",children:[1===u&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-[#ff6600]",children:"Step 1: Get the Template"}),(0,s.jsx)("p",{className:"text-gray-300",children:"To ensure your collection is imported correctly, please use our official CSV template. Fill it with your games data."}),(0,s.jsxs)("div",{className:"bg-[#2a3142] p-4 rounded text-sm text-gray-300 font-mono",children:["Required Columns: Title, Platform",(0,s.jsx)("br",{}),"Optional: Condition, Paid Price, Currency, Notes"]}),(0,s.jsxs)("button",{onClick:()=>{window.open(`${l}/import/template`,"_blank")},className:"w-full py-3 bg-[#ff6600] hover:bg-[#ff7b24] text-white font-bold rounded-lg transition-colors flex items-center justify-center gap-2",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download CSV Template"]}),(0,s.jsx)("div",{className:"pt-4 border-t border-[#2a3142]",children:(0,s.jsx)("button",{onClick:()=>p(2),className:"w-full py-2 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded transition-colors",children:"I have my CSV ready →"})})]}),2===u&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-[#ff6600]",children:"Step 2: Upload CSV"}),(0,s.jsx)("p",{className:"text-gray-300",children:"Upload your filled CSV file here. We will analyze it and try to match your games with our database."}),(0,s.jsxs)("label",{className:"block border-2 border-dashed border-gray-600 rounded-lg p-12 text-center hover:border-[#ff6600] transition-colors cursor-pointer bg-[#1f2533]/50",children:[(0,s.jsx)("input",{type:"file",className:"hidden",accept:".csv",onChange:e=>{e.target.files&&e.target.files[0]&&f(e.target.files[0])}}),(0,s.jsx)("div",{className:"text-gray-400",children:m?(0,s.jsx)("div",{className:"text-[#ff6600] font-bold text-lg",children:m.name}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{children:"Drag & Drop your CSV file here"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"or click to browse"})]})})]}),(0,s.jsxs)("div",{className:"pt-4 flex gap-4",children:[(0,s.jsx)("button",{onClick:()=>p(1),className:"flex-1 py-2 bg-transparent border border-gray-600 text-gray-300 hover:text-white rounded transition-colors",children:"← Back"}),(0,s.jsx)("button",{onClick:w,disabled:!m||x,className:`flex-1 py-2 font-bold rounded transition-colors ${!m||x?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-[#ff6600] hover:bg-[#ff7b24] text-white"}`,children:x?(0,s.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Analyzing..."]}):"Analyze File"})]})]}),3===u&&y&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-green-500",children:"Step 3: Review Matches"}),(0,s.jsxs)("p",{className:"text-gray-300",children:["We found ",(0,s.jsx)("b",{children:y.matches.length})," matches and ",(0,s.jsx)("b",{children:y.ambiguous.length+y.unmatched.length})," needing attention."]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-[#2a3142]/50 p-4 rounded border border-[#2a3142]",children:[(0,s.jsxs)("h3",{className:"font-bold text-green-400 mb-2",children:["✅ Confirmed Matches (",y.matches.length,")"]}),(0,s.jsx)("div",{className:"max-h-60 overflow-y-auto space-y-2",children:y.matches.map((e,t)=>(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm p-2 bg-[#1f2533] rounded",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-white font-medium",children:e.item.title}),(0,s.jsxs)("span",{className:"text-gray-500 text-xs ml-2",children:["(",e.item.platform,")"]})]}),(0,s.jsx)("span",{className:"text-green-500 text-xs font-mono",children:"100% Match"})]},t))})]}),(y.ambiguous.length>0||y.unmatched.length>0)&&(0,s.jsxs)("div",{className:"bg-[#2a3142]/50 p-4 rounded border border-[#ff6600]/30",children:[(0,s.jsxs)("h3",{className:"font-bold text-[#ff6600] mb-2",children:["⚠️ Review Required (",y.ambiguous.length+y.unmatched.length,")"]}),(0,s.jsx)("div",{className:"max-h-60 overflow-y-auto space-y-2",children:[...y.ambiguous,...y.unmatched].map((e,t)=>(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm p-2 bg-[#1f2533] rounded",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-white font-medium",children:e.item.title}),(0,s.jsx)("div",{className:"text-gray-500 text-xs",children:e.item.platform})]}),(0,s.jsx)("div",{className:"text-right",children:e.match?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-[#ff6600] text-xs",children:["Best Guess: ",e.match.product_name]}),(0,s.jsxs)("div",{className:"text-gray-600 text-xs",children:[e.match.score,"% confidence"]})]}):(0,s.jsx)("span",{className:"text-red-500 text-xs font-mono",children:"No Match"})})]},t))})]})]}),(0,s.jsxs)("div",{className:"pt-4 flex gap-4",children:[(0,s.jsx)("button",{onClick:()=>p(2),className:"flex-1 py-2 bg-transparent border border-gray-600 text-gray-300 hover:text-white rounded transition-colors",children:"← Start Over"}),(0,s.jsx)("button",{onClick:j,disabled:g,className:`flex-1 py-2 font-bold rounded transition-colors ${g?"bg-green-800 text-gray-300 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white"}`,children:g?"Importing...":`Import ${y.matches.length} Items`})]})]})]})]})]})})}function d({step:e,current:t,title:r}){let n=e===t,a=e<t;return(0,s.jsxs)("div",{className:`flex items-center gap-3 p-3 rounded-lg transition-colors ${n?"bg-[#1f2533] border border-[#ff6600]":"opacity-50"}`,children:[(0,s.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm
                ${n?"bg-[#ff6600] text-white":a?"bg-green-500 text-white":"bg-gray-700 text-gray-300"}
            `,children:a?"✓":e}),(0,s.jsx)("span",{className:`font-medium ${n?"text-white":"text-gray-400"}`,children:r})]})}},59607:(e,t,r)=>{let{createProxy:s}=r(73439);e.exports=s("C:\\Users\\charl\\collector\\frontend\\node_modules\\next\\dist\\client\\app-dir\\link.js")},62502:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\charl\\\\collector\\\\frontend\\\\src\\\\app\\\\[lang]\\\\import\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\charl\\collector\\frontend\\src\\app\\[lang]\\import\\page.tsx","default")},87327:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(58009);let n=s.forwardRef(function({title:e,titleId:t,...r},n){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,8403,3131,5363,8711],()=>r(21372));module.exports=s})();